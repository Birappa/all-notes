<!DOCTYPE html>
<!-- saved from url=(0109)http://doc-server-ocp4-doc.apps.5c3d.openshift.opentlc.com/03_1_Installing_OpenShift_on_AWS_Solution_Lab.html -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="generator" content="Asciidoctor 0.1.4"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Installing OpenShift on AWS Lab</title><style>@import url(http://cdnjs.cloudflare.com/ajax/libs/font-awesome/3.2.0/css/font-awesome.css);
/*! normalize.css v2.1.2 | MIT License | git.io/normalize */
/* ========================================================================== HTML5 display definitions ========================================================================== */
/** Correct `block` display not defined in IE 8/9. */
article, aside, details, figcaption, figure, footer, header, hgroup, main, nav, section, summary { display: block; }

/** Correct `inline-block` display not defined in IE 8/9. */
audio, canvas, video { display: inline-block; }

/** Prevent modern browsers from displaying `audio` without controls. Remove excess height in iOS 5 devices. */
audio:not([controls]) { display: none; height: 0; }

/** Address `[hidden]` styling not present in IE 8/9. Hide the `template` element in IE, Safari, and Firefox < 22. */
[hidden], template { display: none; }

script { display: none !important; }

/* ========================================================================== Base ========================================================================== */
/** 1. Set default font family to sans-serif. 2. Prevent iOS text size adjust after orientation change, without disabling user zoom. */
html { font-family: sans-serif; /* 1 */ -ms-text-size-adjust: 100%; /* 2 */ -webkit-text-size-adjust: 100%; /* 2 */ }

/** Remove default margin. */
body { margin: 0; }

/* ========================================================================== Links ========================================================================== */
/** Remove the gray background color from active links in IE 10. */
a { background: transparent; }

/** Address `outline` inconsistency between Chrome and other browsers. */
a:focus { outline: thin dotted; }

/** Improve readability when focused and also mouse hovered in all browsers. */
a:active, a:hover { outline: 0; }

/* ========================================================================== Typography ========================================================================== */
/** Address variable `h1` font-size and margin within `section` and `article` contexts in Firefox 4+, Safari 5, and Chrome. */
h1 { font-size: 2em; margin: 0.67em 0; }

/** Address styling not present in IE 8/9, Safari 5, and Chrome. */
abbr[title] { border-bottom: 1px dotted; }

/** Address style set to `bolder` in Firefox 4+, Safari 5, and Chrome. */
b, strong { font-weight: bold; }

/** Address styling not present in Safari 5 and Chrome. */
dfn { font-style: italic; }

/** Address differences between Firefox and other browsers. */
hr { -moz-box-sizing: content-box; box-sizing: content-box; height: 0; }

/** Address styling not present in IE 8/9. */
mark { background: #ff0; color: #000; }

/** Correct font family set oddly in Safari 5 and Chrome. */
code, kbd, pre, samp { font-family: monospace, serif; font-size: 1em; }

/** Improve readability of pre-formatted text in all browsers. */
pre { white-space: pre-wrap; }

/** Set consistent quote types. */
q { quotes: "\201C" "\201D" "\2018" "\2019"; }

/** Address inconsistent and variable font size in all browsers. */
small { font-size: 80%; }

/** Prevent `sub` and `sup` affecting `line-height` in all browsers. */
sub, sup { font-size: 75%; line-height: 0; position: relative; vertical-align: baseline; }

sup { top: -0.5em; }

sub { bottom: -0.25em; }

/* ========================================================================== Embedded content ========================================================================== */
/** Remove border when inside `a` element in IE 8/9. */
img { border: 0; }

/** Correct overflow displayed oddly in IE 9. */
svg:not(:root) { overflow: hidden; }

/* ========================================================================== Figures ========================================================================== */
/** Address margin not present in IE 8/9 and Safari 5. */
figure { margin: 0; }

/* ========================================================================== Forms ========================================================================== */
/** Define consistent border, margin, and padding. */
fieldset { border: 1px solid #c0c0c0; margin: 0 2px; padding: 0.35em 0.625em 0.75em; }

/** 1. Correct `color` not being inherited in IE 8/9. 2. Remove padding so people aren't caught out if they zero out fieldsets. */
legend { border: 0; /* 1 */ padding: 0; /* 2 */ }

/** 1. Correct font family not being inherited in all browsers. 2. Correct font size not being inherited in all browsers. 3. Address margins set differently in Firefox 4+, Safari 5, and Chrome. */
button, input, select, textarea { font-family: inherit; /* 1 */ font-size: 100%; /* 2 */ margin: 0; /* 3 */ }

/** Address Firefox 4+ setting `line-height` on `input` using `!important` in the UA stylesheet. */
button, input { line-height: normal; }

/** Address inconsistent `text-transform` inheritance for `button` and `select`. All other form control elements do not inherit `text-transform` values. Correct `button` style inheritance in Chrome, Safari 5+, and IE 8+. Correct `select` style inheritance in Firefox 4+ and Opera. */
button, select { text-transform: none; }

/** 1. Avoid the WebKit bug in Android 4.0.* where (2) destroys native `audio` and `video` controls. 2. Correct inability to style clickable `input` types in iOS. 3. Improve usability and consistency of cursor style between image-type `input` and others. */
button, html input[type="button"], input[type="reset"], input[type="submit"] { -webkit-appearance: button; /* 2 */ cursor: pointer; /* 3 */ }

/** Re-set default cursor for disabled elements. */
button[disabled], html input[disabled] { cursor: default; }

/** 1. Address box sizing set to `content-box` in IE 8/9. 2. Remove excess padding in IE 8/9. */
input[type="checkbox"], input[type="radio"] { box-sizing: border-box; /* 1 */ padding: 0; /* 2 */ }

/** 1. Address `appearance` set to `searchfield` in Safari 5 and Chrome. 2. Address `box-sizing` set to `border-box` in Safari 5 and Chrome (include `-moz` to future-proof). */
input[type="search"] { -webkit-appearance: textfield; /* 1 */ -moz-box-sizing: content-box; -webkit-box-sizing: content-box; /* 2 */ box-sizing: content-box; }

/** Remove inner padding and search cancel button in Safari 5 and Chrome on OS X. */
input[type="search"]::-webkit-search-cancel-button, input[type="search"]::-webkit-search-decoration { -webkit-appearance: none; }

/** Remove inner padding and border in Firefox 4+. */
button::-moz-focus-inner, input::-moz-focus-inner { border: 0; padding: 0; }

/** 1. Remove default vertical scrollbar in IE 8/9. 2. Improve readability and alignment in all browsers. */
textarea { overflow: auto; /* 1 */ vertical-align: top; /* 2 */ }

/* ========================================================================== Tables ========================================================================== */
/** Remove most spacing between table cells. */
table { border-collapse: collapse; border-spacing: 0; }

meta.foundation-mq-small { font-family: "only screen and (min-width: 768px)"; width: 768px; }

meta.foundation-mq-medium { font-family: "only screen and (min-width:1280px)"; width: 1280px; }

meta.foundation-mq-large { font-family: "only screen and (min-width:1440px)"; width: 1440px; }

*, *:before, *:after { -moz-box-sizing: border-box; -webkit-box-sizing: border-box; box-sizing: border-box; }

html, body { font-size: 100%; }

body { background: white; color: #222222; padding: 0; margin: 0; font-family: "Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif; font-weight: normal; font-style: normal; line-height: 1; position: relative; cursor: auto; }

a:hover { cursor: pointer; }

img, object, embed { max-width: 100%; height: auto; }

object, embed { height: 100%; }

img { -ms-interpolation-mode: bicubic; }

#map_canvas img, #map_canvas embed, #map_canvas object, .map_canvas img, .map_canvas embed, .map_canvas object { max-width: none !important; }

.left { float: left !important; }

.right { float: right !important; }

.text-left { text-align: left !important; }

.text-right { text-align: right !important; }

.text-center { text-align: center !important; }

.text-justify { text-align: justify !important; }

.hide { display: none; }

.antialiased, body { -webkit-font-smoothing: antialiased; }

img { display: inline-block; vertical-align: middle; }

textarea { height: auto; min-height: 50px; }

select { width: 100%; }

p.lead, .paragraph.lead > p, #preamble > .sectionbody > .paragraph:first-of-type p { font-size: 1.21875em; line-height: 1.6; }

.subheader, #content #toctitle, .admonitionblock td.content > .title, .exampleblock > .title, .imageblock > .title, .listingblock > .title, .literalblock > .title, .mathblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, .sidebarblock > .title, .tableblock > .title, .verseblock > .title, .videoblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title, .tableblock > caption { line-height: 1.4; color: #003b6b; font-weight: 300; margin-top: 0.2em; margin-bottom: 0.5em; }

/* Typography resets */
div, dl, dt, dd, ul, ol, li, h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6, pre, form, p, blockquote, th, td { margin: 0; padding: 0; direction: ltr; }

/* Default Link Styles */
a { color: #00579e; text-decoration: none; line-height: inherit; }
a:hover, a:focus { color: #333333; }
a img { border: none; }

/* Default paragraph styles */
p { font-family: Arial, sans-serif; font-weight: normal; font-size: 1em; line-height: 1.6; margin-bottom: 0.75em; text-rendering: optimizeLegibility; }
p aside { font-size: 0.875em; line-height: 1.35; font-style: italic; }

/* Default header styles */
h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { font-family: Arial, sans-serif; font-weight: normal; font-style: normal; color: #7b2d00; text-rendering: optimizeLegibility; margin-top: 0.5em; margin-bottom: 0.5em; line-height: 1.2125em; }
h1 small, h2 small, h3 small, #toctitle small, .sidebarblock > .content > .title small, h4 small, h5 small, h6 small { font-size: 60%; color: #ff6b15; line-height: 0; }

h1 { font-size: 2.125em; }

h2 { font-size: 1.6875em; }

h3, #toctitle, .sidebarblock > .content > .title { font-size: 1.375em; }

h4 { font-size: 1.125em; }

h5 { font-size: 1.125em; }

h6 { font-size: 1em; }

hr { border: solid #dddddd; border-width: 1px 0 0; clear: both; margin: 1.25em 0 1.1875em; height: 0; }

/* Helpful Typography Defaults */
em, i { font-style: italic; line-height: inherit; }

strong, b { font-weight: bold; line-height: inherit; }

small { font-size: 60%; line-height: inherit; }

code { font-family: Consolas, "Liberation Mono", Courier, monospace; font-weight: bold; color: #003426; }

/* Lists */
ul, ol, dl { font-size: 1em; line-height: 1.6; margin-bottom: 0.75em; list-style-position: outside; font-family: Arial, sans-serif; }

ul, ol { margin-left: 1.5em; }
ul.no-bullet, ol.no-bullet { margin-left: 1.5em; }

/* Unordered Lists */
ul li ul, ul li ol { margin-left: 1.25em; margin-bottom: 0; font-size: 1em; /* Override nested font-size change */ }
ul.square li ul, ul.circle li ul, ul.disc li ul { list-style: inherit; }
ul.square { list-style-type: square; }
ul.circle { list-style-type: circle; }
ul.disc { list-style-type: disc; }
ul.no-bullet { list-style: none; }

/* Ordered Lists */
ol li ul, ol li ol { margin-left: 1.25em; margin-bottom: 0; }

/* Definition Lists */
dl dt { margin-bottom: 0.3em; font-weight: bold; }
dl dd { margin-bottom: 0.75em; }

/* Abbreviations */
abbr, acronym { text-transform: uppercase; font-size: 90%; color: black; border-bottom: 1px dotted #dddddd; cursor: help; }

abbr { text-transform: none; }

/* Blockquotes */
blockquote { margin: 0 0 0.75em; padding: 0.5625em 1.25em 0 1.1875em; border-left: 1px solid #dddddd; }
blockquote cite { display: block; font-size: 0.8125em; color: #e15200; }
blockquote cite:before { content: "\2014 \0020"; }
blockquote cite a, blockquote cite a:visited { color: #e15200; }

blockquote, blockquote p { line-height: 1.6; color: #333333; }

/* Microformats */
.vcard { display: inline-block; margin: 0 0 1.25em 0; border: 1px solid #dddddd; padding: 0.625em 0.75em; }
.vcard li { margin: 0; display: block; }
.vcard .fn { font-weight: bold; font-size: 0.9375em; }

.vevent .summary { font-weight: bold; }
.vevent abbr { cursor: auto; text-decoration: none; font-weight: bold; border: none; padding: 0 0.0625em; }

@media only screen and (min-width: 768px) { h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { line-height: 1.4; }
  h1 { font-size: 2.75em; }
  h2 { font-size: 2.3125em; }
  h3, #toctitle, .sidebarblock > .content > .title { font-size: 1.6875em; }
  h4 { font-size: 1.4375em; } }
/* Print styles.  Inlined to avoid required HTTP connection: www.phpied.com/delay-loading-your-print-css/ Credit to Paul Irish and HTML5 Boilerplate (html5boilerplate.com)
*/
.print-only { display: none !important; }

@media print { * { background: transparent !important; color: #000 !important; /* Black prints faster: h5bp.com/s */ box-shadow: none !important; text-shadow: none !important; }
  a, a:visited { text-decoration: underline; }
  a[href]:after { content: " (" attr(href) ")"; }
  abbr[title]:after { content: " (" attr(title) ")"; }
  .ir a:after, a[href^="javascript:"]:after, a[href^="#"]:after { content: ""; }
  pre, blockquote { border: 1px solid #999; page-break-inside: avoid; }
  thead { display: table-header-group; /* h5bp.com/t */ }
  tr, img { page-break-inside: avoid; }
  img { max-width: 100% !important; }
  @page { margin: 0.5cm; }
  p, h2, h3, #toctitle, .sidebarblock > .content > .title { orphans: 3; widows: 3; }
  h2, h3, #toctitle, .sidebarblock > .content > .title { page-break-after: avoid; }
  .hide-on-print { display: none !important; }
  .print-only { display: block !important; }
  .hide-for-print { display: none !important; }
  .show-for-print { display: inherit !important; } }
/* Tables */
table { background: white; margin-bottom: 1.25em; border: solid 1px #d8d8ce; }
/* Change -webkit-linear-gradient colors to  #a70000 and remove gradient */
table thead, table tfoot { background: -webkit-linear-gradient(top, #a70000, #a70000); font-weight: bold; }
table thead tr th, table thead tr td, table tfoot tr th, table tfoot tr td { padding: 0.5em 0.625em 0.625em; font-size: inherit; color: white; text-align: left; }
table tr th, table tr td { padding: 0.5625em 0.625em; font-size: inherit; color: #6d6e71; }
table tr.even, table tr.alt, table tr:nth-of-type(even) { background: #edf2f2; }
table thead tr th, table tfoot tr th, table tbody tr td, table tr td, table tfoot tr td { display: table-cell; line-height: 1.4; }

a:hover, a:focus { text-decoration: underline; }

.clearfix:before, .clearfix:after, .float-group:before, .float-group:after { content: " "; display: table; }
.clearfix:after, .float-group:after { clear: both; }

*:not(pre) > code { font-size: inherit; padding: 3px 2px 1px 2px; white-space: nowrap; background-color: #eeeeee; border: 1px solid #dddddd; -webkit-border-radius: 0; border-radius: 0; text-shadow: none; }

pre, pre > code { line-height: 1.6; color: black; font-family: Consolas, "Liberation Mono", Courier, monospace; font-weight: normal; }

kbd.keyseq { color: #333333; }

kbd:not(.keyseq) { display: inline-block; color: black; font-size: 0.75em; line-height: 1.4; background-color: #F7F7F7; border: 1px solid #ccc; -webkit-border-radius: 3px; border-radius: 3px; -webkit-box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 2px white inset; box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 2px white inset; margin: -0.15em 0.15em 0 0.15em; padding: 0.2em 0.6em 0.2em 0.5em; vertical-align: middle; white-space: nowrap; }

kbd kbd:first-child { margin-left: 0; }

kbd kbd:last-child { margin-right: 0; }

.menuseq, .menu { color: black; }

b.button:before { content: '[ '; }

b.button:after { content: ' ]'; }

#header, #content, #footnotes, #footer { width: 100%; margin-left: auto; margin-right: auto; margin-top: 0; margin-bottom: 0; max-width: 62.5em; *zoom: 1; position: relative; padding-left: 1.5em; padding-right: 1.5em; }
#header:before, #header:after, #content:before, #content:after, #footnotes:before, #footnotes:after, #footer:before, #footer:after { content: " "; display: table; }
#header:after, #content:after, #footnotes:after, #footer:after { clear: both; }

#header { margin-bottom: 2.5em; }
#header > h1 { color: #7b2d00; font-weight: normal; border-bottom: 1px solid #dddddd; margin-bottom: -28px; padding-bottom: 32px; }
#header span { color: #333333; }
#header #revnumber { text-transform: capitalize; }
#header br { display: none; }
#header br + span { padding-left: 3px; }
#header br + span:before { content: "\2013 \0020"; }
#header br + span.author { padding-left: 0; }
#header br + span.author:before { content: ", "; }

#toc { border-bottom: 1px solid #dddddd; padding-bottom: 1.25em; }
#toc > ul { margin-left: 0.25em; }
#toc ul.sectlevel0 > li > a { font-style: italic; }
#toc ul.sectlevel0 ul.sectlevel1 { margin-left: 0; margin-top: 0.5em; margin-bottom: 0.5em; }
#toc ul { list-style-type: none; }

#toctitle { color: #003b6b; }

@media only screen and (min-width: 768px) { body.toc2 { padding-left: 15em; padding-right: 0; }
  #toc.toc2 { position: fixed; width: 15em; left: 0; top: 0; border-right: 1px solid #dddddd; border-bottom: 0; z-index: 1000; padding: 1em; height: 100%; overflow: auto; }
  #toc.toc2 #toctitle { margin-top: 0; font-size: 1.2em; }
  #toc.toc2 > ul { font-size: .90em; }
  #toc.toc2 ul ul { margin-left: 0; padding-left: 1em; }
  #toc.toc2 ul.sectlevel0 ul.sectlevel1 { padding-left: 0; margin-top: 0.5em; margin-bottom: 0.5em; }
  body.toc2.toc-right { padding-left: 0; padding-right: 15em; }
  body.toc2.toc-right #toc.toc2 { border-right: 0; border-left: 1px solid #dddddd; left: auto; right: 0; } }
@media only screen and (min-width: 1280px) { body.toc2 { padding-left: 20em; padding-right: 0; }
  #toc.toc2 { width: 20em; }
  #toc.toc2 #toctitle { font-size: 1.375em; }
  #toc.toc2 > ul { font-size: 0.95em; }
  #toc.toc2 ul ul { padding-left: 1.25em; }
  body.toc2.toc-right { padding-left: 0; padding-right: 20em; } }
#content #toc { border-style: solid; border-width: 1px; border-color: #e6e6e6; margin-bottom: 1.25em; padding: 1.25em; background: white; border-width: 0; -webkit-border-radius: 0; border-radius: 0; }
#content #toc > :first-child { margin-top: 0; }
#content #toc > :last-child { margin-bottom: 0; }
#content #toc a { text-decoration: none; }

#content #toctitle { font-weight: bold; font-family: "Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif; font-size: 1em; padding-left: 0.125em; }

#footer { max-width: 100%; background-color: none; padding: 1.25em; }

#footer-text { color: black; line-height: 1.44; }

.sect1 { padding-bottom: 1.25em; }

.sect1 + .sect1 { border-top: 1px solid #dddddd; }

#content h1 > a.anchor, h2 > a.anchor, h3 > a.anchor, #toctitle > a.anchor, .sidebarblock > .content > .title > a.anchor, h4 > a.anchor, h5 > a.anchor, h6 > a.anchor { position: absolute; width: 1em; margin-left: -1em; display: block; text-decoration: none; visibility: hidden; text-align: center; font-weight: normal; }
#content h1 > a.anchor:before, h2 > a.anchor:before, h3 > a.anchor:before, #toctitle > a.anchor:before, .sidebarblock > .content > .title > a.anchor:before, h4 > a.anchor:before, h5 > a.anchor:before, h6 > a.anchor:before { content: '\00A7'; font-size: .85em; vertical-align: text-top; display: block; margin-top: 0.05em; }
#content h1:hover > a.anchor, #content h1 > a.anchor:hover, h2:hover > a.anchor, h2 > a.anchor:hover, h3:hover > a.anchor, #toctitle:hover > a.anchor, .sidebarblock > .content > .title:hover > a.anchor, h3 > a.anchor:hover, #toctitle > a.anchor:hover, .sidebarblock > .content > .title > a.anchor:hover, h4:hover > a.anchor, h4 > a.anchor:hover, h5:hover > a.anchor, h5 > a.anchor:hover, h6:hover > a.anchor, h6 > a.anchor:hover { visibility: visible; }
#content h1 > a.link, h2 > a.link, h3 > a.link, #toctitle > a.link, .sidebarblock > .content > .title > a.link, h4 > a.link, h5 > a.link, h6 > a.link { color: #7b2d00; text-decoration: none; }
#content h1 > a.link:hover, h2 > a.link:hover, h3 > a.link:hover, #toctitle > a.link:hover, .sidebarblock > .content > .title > a.link:hover, h4 > a.link:hover, h5 > a.link:hover, h6 > a.link:hover { color: #622400; }

.imageblock, .literalblock, .listingblock, .mathblock, .verseblock, .videoblock { margin-bottom: 1.25em; }

.admonitionblock td.content > .title, .exampleblock > .title, .imageblock > .title, .listingblock > .title, .literalblock > .title, .mathblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, .sidebarblock > .title, .tableblock > .title, .verseblock > .title, .videoblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title { text-align: left; font-weight: bold; }

.tableblock > caption { text-align: left; font-weight: bold; white-space: nowrap; overflow: visible; max-width: 0; }

table.tableblock #preamble > .sectionbody > .paragraph:first-of-type p { font-size: inherit; }

.admonitionblock > table { border: 0; background: none; width: 100%; }
.admonitionblock > table td.icon { text-align: center; width: 80px; }
.admonitionblock > table td.icon img { max-width: none; }
.admonitionblock > table td.icon .title { font-weight: bold; text-transform: uppercase; }
.admonitionblock > table td.content { padding-left: 1.125em; padding-right: 1.25em; border-left: 1px solid #dddddd; color: #333333; }
.admonitionblock > table td.content > :last-child > :last-child { margin-bottom: 0; }

.exampleblock > .content { border-style: solid; border-width: 1px; border-color: #e6e6e6; margin-bottom: 1.25em; padding: 1.25em; background: white; -webkit-border-radius: 0; border-radius: 0; }
.exampleblock > .content > :first-child { margin-top: 0; }
.exampleblock > .content > :last-child { margin-bottom: 0; }
.exampleblock > .content h1, .exampleblock > .content h2, .exampleblock > .content h3, .exampleblock > .content #toctitle, .sidebarblock.exampleblock > .content > .title, .exampleblock > .content h4, .exampleblock > .content h5, .exampleblock > .content h6, .exampleblock > .content p { color: #333333; }
.exampleblock > .content h1, .exampleblock > .content h2, .exampleblock > .content h3, .exampleblock > .content #toctitle, .sidebarblock.exampleblock > .content > .title, .exampleblock > .content h4, .exampleblock > .content h5, .exampleblock > .content h6 { line-height: 1; margin-bottom: 0.625em; }
.exampleblock > .content h1.subheader, .exampleblock > .content h2.subheader, .exampleblock > .content h3.subheader, .exampleblock > .content .subheader#toctitle, .sidebarblock.exampleblock > .content > .subheader.title, .exampleblock > .content h4.subheader, .exampleblock > .content h5.subheader, .exampleblock > .content h6.subheader { line-height: 1.4; }

.exampleblock.result > .content { -webkit-box-shadow: 0 1px 8px #aaaaaa; box-shadow: 0 1px 8px #aaaaaa; }

.sidebarblock { border-style: solid; border-width: 1px; border-color: #e6e6e6; margin-bottom: 1.25em; padding: 1.25em; background: white; -webkit-border-radius: 0; border-radius: 0; }
.sidebarblock > :first-child { margin-top: 0; }
.sidebarblock > :last-child { margin-bottom: 0; }
.sidebarblock h1, .sidebarblock h2, .sidebarblock h3, .sidebarblock #toctitle, .sidebarblock > .content > .title, .sidebarblock h4, .sidebarblock h5, .sidebarblock h6, .sidebarblock p { color: #333333; }
.sidebarblock h1, .sidebarblock h2, .sidebarblock h3, .sidebarblock #toctitle, .sidebarblock > .content > .title, .sidebarblock h4, .sidebarblock h5, .sidebarblock h6 { line-height: 1; margin-bottom: 0.625em; }
.sidebarblock h1.subheader, .sidebarblock h2.subheader, .sidebarblock h3.subheader, .sidebarblock .subheader#toctitle, .sidebarblock > .content > .subheader.title, .sidebarblock h4.subheader, .sidebarblock h5.subheader, .sidebarblock h6.subheader { line-height: 1.4; }
.sidebarblock > .content > .title { color: #003b6b; margin-top: 0; line-height: 1.6; }

.exampleblock > .content > :last-child > :last-child, .exampleblock > .content .olist > ol > li:last-child > :last-child, .exampleblock > .content .ulist > ul > li:last-child > :last-child, .exampleblock > .content .qlist > ol > li:last-child > :last-child, .sidebarblock > .content > :last-child > :last-child, .sidebarblock > .content .olist > ol > li:last-child > :last-child, .sidebarblock > .content .ulist > ul > li:last-child > :last-child, .sidebarblock > .content .qlist > ol > li:last-child > :last-child { margin-bottom: 0; }

.literalblock pre:not([class]), .listingblock pre:not([class]) { background: #eeeeee; }
.literalblock pre, .literalblock pre[class], .listingblock pre, .listingblock pre[class] { border-width: 1px; border-style: dashed; border-color: #666666; -webkit-border-radius: 0; border-radius: 0; padding: 1.25em 1.5625em 1.125em 1.5625em; word-wrap: break-word; }
.literalblock pre.nowrap, .literalblock pre[class].nowrap, .listingblock pre.nowrap, .listingblock pre[class].nowrap { overflow-x: auto; white-space: pre; word-wrap: normal; }
.literalblock pre > code, .literalblock pre[class] > code, .listingblock pre > code, .listingblock pre[class] > code { display: block; }
@media only screen { .literalblock pre, .literalblock pre[class], .listingblock pre, .listingblock pre[class] { font-size: 0.72em; } }
@media only screen and (min-width: 768px) { .literalblock pre, .literalblock pre[class], .listingblock pre, .listingblock pre[class] { font-size: 0.81em; } }
@media only screen and (min-width: 1280px) { .literalblock pre, .literalblock pre[class], .listingblock pre, .listingblock pre[class] { font-size: 0.9em; } }

.listingblock pre.highlight { padding: 0; }
.listingblock pre.highlight > code { padding: 1.25em 1.5625em 1.125em 1.5625em; }

.listingblock > .content { position: relative; }

.listingblock:hover code[class*=" language-"]:before { text-transform: uppercase; font-size: 0.9em; color: #999; position: absolute; top: 0.375em; right: 0.375em; }

.listingblock:hover code.asciidoc:before { content: "asciidoc"; }
.listingblock:hover code.clojure:before { content: "clojure"; }
.listingblock:hover code.css:before { content: "css"; }
.listingblock:hover code.groovy:before { content: "groovy"; }
.listingblock:hover code.html:before { content: "html"; }
.listingblock:hover code.java:before { content: "java"; }
.listingblock:hover code.javascript:before { content: "javascript"; }
.listingblock:hover code.python:before { content: "python"; }
.listingblock:hover code.ruby:before { content: "ruby"; }
.listingblock:hover code.sass:before { content: "sass"; }
.listingblock:hover code.scss:before { content: "scss"; }
.listingblock:hover code.xml:before { content: "xml"; }
.listingblock:hover code.yaml:before { content: "yaml"; }

.listingblock.terminal pre .command:before { content: attr(data-prompt); padding-right: 0.5em; color: #999; }

.listingblock.terminal pre .command:not([data-prompt]):before { content: '$'; }

table.pyhltable { border: 0; margin-bottom: 0; }

table.pyhltable td { vertical-align: top; padding-top: 0; padding-bottom: 0; }

table.pyhltable td.code { padding-left: .75em; padding-right: 0; }

.highlight.pygments .lineno, table.pyhltable td:not(.code) { color: #999; padding-left: 0; padding-right: .5em; border-right: 1px solid #dddddd; }

.highlight.pygments .lineno { display: inline-block; margin-right: .25em; }

table.pyhltable .linenodiv { background-color: transparent !important; padding-right: 0 !important; }

.quoteblock { margin: 0 0 0.75em; padding: 0.5625em 1.25em 0 1.1875em; border-left: 1px solid #dddddd; }
.quoteblock blockquote { margin: 0 0 0.75em 0; padding: 0 0 0.5625em 0; border: 0; }
.quoteblock blockquote > .paragraph:last-child p { margin-bottom: 0; }
.quoteblock .attribution { margin-top: -.25em; padding-bottom: 0.5625em; font-size: 0.8125em; color: #e15200; }
.quoteblock .attribution br { display: none; }
.quoteblock .attribution cite { display: block; margin-bottom: 0.625em; }

table thead th, table tfoot th { font-weight: bold; }

table.tableblock.grid-all { border-collapse: separate; border-spacing: 1px; -webkit-border-radius: 0; border-radius: 0; border-top: 1px solid #dddddd; border-bottom: 1px solid #dddddd; }

table.tableblock.frame-topbot, table.tableblock.frame-none { border-left: 0; border-right: 0; }

table.tableblock.frame-sides, table.tableblock.frame-none { border-top: 0; border-bottom: 0; }

table.tableblock td .paragraph:last-child p > p:last-child, table.tableblock th > p:last-child, table.tableblock td > p:last-child { margin-bottom: 0; }

th.tableblock.halign-left, td.tableblock.halign-left { text-align: left; }

th.tableblock.halign-right, td.tableblock.halign-right { text-align: right; }

th.tableblock.halign-center, td.tableblock.halign-center { text-align: center; }

th.tableblock.valign-top, td.tableblock.valign-top { vertical-align: top; }

th.tableblock.valign-bottom, td.tableblock.valign-bottom { vertical-align: bottom; }

th.tableblock.valign-middle, td.tableblock.valign-middle { vertical-align: middle; }

tbody tr th { display: table-cell; line-height: 1.4; background: -webkit-linear-gradient(top, #add386, #90b66a); }

tbody tr th, tbody tr th p, tfoot tr th, tfoot tr th p { color: white; font-weight: bold; }

td > div.verse { white-space: pre; }

ol { margin-left: 1.75em; }

ul li ol { margin-left: 1.5em; }

dl dd { margin-left: 1.125em; }

dl dd:last-child, dl dd:last-child > :last-child { margin-bottom: 0; }

ol > li p, ul > li p, ul dd, ol dd, .olist .olist, .ulist .ulist, .ulist .olist, .olist .ulist { margin-bottom: 0.375em; }

ul.unstyled, ol.unnumbered, ul.checklist, ul.none { list-style-type: none; }

ul.unstyled, ol.unnumbered, ul.checklist { margin-left: 0.625em; }

ul.checklist li > p:first-child > i[class^="icon-check"]:first-child, ul.checklist li > p:first-child > input[type="checkbox"]:first-child { margin-right: 0.25em; }

ul.checklist li > p:first-child > input[type="checkbox"]:first-child { position: relative; top: 1px; }

ul.inline { margin: 0 auto 0.375em auto; margin-left: -1.375em; margin-right: 0; padding: 0; list-style: none; overflow: hidden; }
ul.inline > li { list-style: none; float: left; margin-left: 1.375em; display: block; }
ul.inline > li > * { display: block; }

.unstyled dl dt { font-weight: normal; font-style: normal; }

ol.arabic { list-style-type: decimal; }

ol.decimal { list-style-type: decimal-leading-zero; }

ol.loweralpha { list-style-type: lower-alpha; }

ol.upperalpha { list-style-type: upper-alpha; }

ol.lowerroman { list-style-type: lower-roman; }

ol.upperroman { list-style-type: upper-roman; }

ol.lowergreek { list-style-type: lower-greek; }

.hdlist > table, .colist > table { border: 0; background: none; }
.hdlist > table > tbody > tr, .colist > table > tbody > tr { background: none; }

td.hdlist1 { padding-right: .8em; font-weight: bold; }

td.hdlist1, td.hdlist2 { vertical-align: top; }

.literalblock + .colist, .listingblock + .colist { margin-top: -0.5em; }

.colist > table tr > td:first-of-type { padding: 0 .8em; line-height: 1; }
.colist > table tr > td:last-of-type { padding: 0.25em 0; }

.qanda > ol > li > p > em:only-child { color: #004985; }

.thumb, .th { line-height: 0; display: inline-block; border: solid 4px white; -webkit-box-shadow: 0 0 0 1px #dddddd; box-shadow: 0 0 0 1px #dddddd; }

.imageblock.left, .imageblock[style*="float: left"] { margin: 0.25em 0.625em 1.25em 0; }
.imageblock.right, .imageblock[style*="float: right"] { margin: 0.25em 0 1.25em 0.625em; }
.imageblock > .title { margin-bottom: 0; }
.imageblock.thumb, .imageblock.th { border-width: 6px; }
.imageblock.thumb > .title, .imageblock.th > .title { padding: 0 0.125em; }

.image.left, .image.right { margin-top: 0.25em; margin-bottom: 0.25em; display: inline-block; line-height: 0; }
.image.left { margin-right: 0.625em; }
.image.right { margin-left: 0.625em; }

a.image { text-decoration: none; }

span.footnote, span.footnoteref { vertical-align: super; font-size: 0.875em; }
span.footnote a, span.footnoteref a { text-decoration: none; }

#footnotes { padding-top: 0.75em; padding-bottom: 0.75em; margin-bottom: 0.625em; }
#footnotes hr { width: 20%; min-width: 6.25em; margin: -.25em 0 .75em 0; border-width: 1px 0 0 0; }
#footnotes .footnote { padding: 0 0.375em; line-height: 1.3; font-size: 0.875em; margin-left: 1.2em; text-indent: -1.2em; margin-bottom: .2em; }
#footnotes .footnote a:first-of-type { font-weight: bold; text-decoration: none; }
#footnotes .footnote:last-of-type { margin-bottom: 0; }

#content #footnotes { margin-top: -0.625em; margin-bottom: 0; padding: 0.75em 0; }

.gist .file-data > table { border: none; background: #fff; width: 100%; margin-bottom: 0; }
.gist .file-data > table td.line-data { width: 99%; }

div.unbreakable { page-break-inside: avoid; }

.big { font-size: larger; }

.small { font-size: smaller; }

.underline { text-decoration: underline; }

.overline { text-decoration: overline; }

.line-through { text-decoration: line-through; }

.aqua { color: #00bfbf; }

.aqua-background { background-color: #00fafa; }

.black { color: black; }

.black-background { background-color: black; }

.blue { color: #0000bf; }

.blue-background { background-color: #0000fa; }

.fuchsia { color: #bf00bf; }

.fuchsia-background { background-color: #fa00fa; }

.gray { color: #606060; }

.gray-background { background-color: #7d7d7d; }

.green { color: #006000; }

.green-background { background-color: #007d00; }

.lime { color: #00bf00; }

.lime-background { background-color: #00fa00; }

.maroon { color: #600000; }

.maroon-background { background-color: #7d0000; }

.navy { color: #000060; }

.navy-background { background-color: #00007d; }

.olive { color: #606000; }

.olive-background { background-color: #7d7d00; }

.purple { color: #600060; }

.purple-background { background-color: #7d007d; }

.red { color: #bf0000; }

.red-background { background-color: #fa0000; }

.silver { color: #909090; }

.silver-background { background-color: #bcbcbc; }

.teal { color: #006060; }

.teal-background { background-color: #007d7d; }

.white { color: #bfbfbf; }

.white-background { background-color: #fafafa; }

.yellow { color: #bfbf00; }

.yellow-background { background-color: #fafa00; }

span.icon > [class^="icon-"], span.icon > [class*=" icon-"] { cursor: default; }

.admonitionblock td.icon [class^="icon-"]:before { font-size: 2.5em; text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5); cursor: default; }
.admonitionblock td.icon .icon-note:before { content: "\f05a"; color: #00579e; color: #004176; }
.admonitionblock td.icon .icon-tip:before { content: "\f0eb"; text-shadow: 1px 1px 2px rgba(155, 155, 0, 0.8); color: #111; }
.admonitionblock td.icon .icon-warning:before { content: "\f071"; color: #bf6900; }
.admonitionblock td.icon .icon-caution:before { content: "\f06d"; color: #bf3400; }
.admonitionblock td.icon .icon-important:before { content: "\f06a"; color: #bf0000; }

.conum { display: inline-block; color: white !important; background-color: black; -webkit-border-radius: 100px; border-radius: 100px; text-align: center; width: 20px; height: 20px; font-size: 12px; font-weight: bold; line-height: 20px; font-family: Arial, sans-serif; font-style: normal; position: relative; top: -2px; letter-spacing: -1px; }
.conum * { color: white !important; }
.conum + b { display: none; }
.conum:after { content: attr(data-value); }
.conum:not([data-value]):empty { display: none; }

h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { border-bottom: 1px solid #dddddd; }

#toctitle { color: #00406F; font-weight: normal; margin-top: 1.5em; }

.sidebarblock { border-color: #aaa; }

code { -webkit-border-radius: 4px; border-radius: 4px; }

p.tableblock.header { color: #6d6e71; }</style><link rel="stylesheet" href="./Installing OpenShift on AWS Lab_files/font-awesome.min.css"><link rel="stylesheet" href="./Installing OpenShift on AWS Lab_files/sunburst.min.css"><script src="./Installing OpenShift on AWS Lab_files/highlight.min.js.download"></script><script>hljs.initHighlightingOnLoad()</script></head><body class="article toc2 toc-left"><div id="header"><div id="toc" class="toc2"><div id="toctitle">Table of Contents</div><ul class="sectlevel1">
<li><a href="http://doc-server-ocp4-doc.apps.5c3d.openshift.opentlc.com/03_1_Installing_OpenShift_on_AWS_Solution_Lab.html#_installing_openshift_on_aws_lab">Installing OpenShift on AWS Lab</a></li>
<li><a href="http://doc-server-ocp4-doc.apps.5c3d.openshift.opentlc.com/03_1_Installing_OpenShift_on_AWS_Solution_Lab.html#_provision_lab_environment">1. Provision Lab Environment</a></li>
<li>
<ul class="sectlevel2">
<li><a href="http://doc-server-ocp4-doc.apps.5c3d.openshift.opentlc.com/03_1_Installing_OpenShift_on_AWS_Solution_Lab.html#_start_environment_after_shut_down">1.1. Start Environment After Shut Down</a></li>
<li><a href="http://doc-server-ocp4-doc.apps.5c3d.openshift.opentlc.com/03_1_Installing_OpenShift_on_AWS_Solution_Lab.html#_test_server_connections">1.2. Test Server Connections</a></li>
</ul>
</li>
<li><a href="http://doc-server-ocp4-doc.apps.5c3d.openshift.opentlc.com/03_1_Installing_OpenShift_on_AWS_Solution_Lab.html#labexercises">2. Configure the Bastion VM to run the OpenShift Installer</a></li>
<li>
<ul class="sectlevel2">
<li><a href="http://doc-server-ocp4-doc.apps.5c3d.openshift.opentlc.com/03_1_Installing_OpenShift_on_AWS_Solution_Lab.html#_set_up_installation_prerequisites">2.1. Set up Installation Prerequisites</a></li>
</ul>
</li>
<li><a href="http://doc-server-ocp4-doc.apps.5c3d.openshift.opentlc.com/03_1_Installing_OpenShift_on_AWS_Solution_Lab.html#_installing_openshift_container_platform">3. Installing OpenShift Container Platform</a></li>
<li>
<ul class="sectlevel2">
<li><a href="http://doc-server-ocp4-doc.apps.5c3d.openshift.opentlc.com/03_1_Installing_OpenShift_on_AWS_Solution_Lab.html#_run_the_openshift_installer">3.1. Run the OpenShift Installer</a></li>
</ul>
</li>
<li><a href="http://doc-server-ocp4-doc.apps.5c3d.openshift.opentlc.com/03_1_Installing_OpenShift_on_AWS_Solution_Lab.html#_validating_the_cluster">4. Validating the Cluster</a></li>
<li>
<ul class="sectlevel2">
<li><a href="http://doc-server-ocp4-doc.apps.5c3d.openshift.opentlc.com/03_1_Installing_OpenShift_on_AWS_Solution_Lab.html#_aws_verification">4.1. AWS Verification</a></li>
</ul>
</li>
<li><a href="http://doc-server-ocp4-doc.apps.5c3d.openshift.opentlc.com/03_1_Installing_OpenShift_on_AWS_Solution_Lab.html#_exploring_the_cluster">5. Exploring the Cluster</a></li>
<li><a href="http://doc-server-ocp4-doc.apps.5c3d.openshift.opentlc.com/03_1_Installing_OpenShift_on_AWS_Solution_Lab.html#_configure_ldap_authentication">6. Configure LDAP Authentication</a></li>
<li><a href="http://doc-server-ocp4-doc.apps.5c3d.openshift.opentlc.com/03_1_Installing_OpenShift_on_AWS_Solution_Lab.html#_remove_kubeadmin_user">7. Remove kubeadmin User</a></li>
</ul></div></div><div id="content"><div class="sect1"><h2 id="_installing_openshift_on_aws_lab">Installing OpenShift on AWS Lab</h2><div class="sectionbody"><div class="paragraph"><div class="title">Goals</div><p>In this lab, you deploy and configure OpenShift Container Platform 4 using the fully automatic installer on Amazon Web Services.</p></div>
<div class="ulist"><ul><li><p>Configure the Bastion VM to run the OpenShift Installer</p></li><li><p>Installing OpenShift Container Platform</p></li><li><p>Validating the Cluster</p></li><li><p>Exploring the Cluster</p></li></ul></div>
<div class="ulist"><div class="title">Provisioned Environment Hosts</div><ul><li><p>Bastion host: <code>bastion.$GUID.$SANDBOX.opentlc.com</code>, <code>clientvm.$GUID.internal</code></p></li></ul></div></div></div>
<div class="sect1"><h2 id="_provision_lab_environment">1. Provision Lab Environment</h2><div class="sectionbody"><div class="admonitionblock note"><table><tbody><tr><td class="icon"><i class="icon-note" title="Note"></i></td><td class="content">If you previously set up an environment for this class, you can skip this section and go directly to the <a href="http://doc-server-ocp4-doc.apps.5c3d.openshift.opentlc.com/03_1_Installing_OpenShift_on_AWS_Solution_Lab.html#labexercises">Configure the Bastion VM to run the OpenShift Installer</a> section.</td></tr></tbody></table></div>
<div class="paragraph"><p>In this section, you provision the lab environment to provide access to all of the components required to perform the labs. The lab environment is a shared cloud-based environment, so that you can access it over the Internet from anywhere. However, do not expect performance to match a dedicated environment.</p></div>
<div class="olist arabic"><ol class="arabic"><li><p>Go to the <a href="https://labs.opentlc.com/" target="_blank">OPENTLC lab portal</a> and use your OPENTLC credentials to log in.</p><div class="admonitionblock tip"><table><tbody><tr><td class="icon"><i class="icon-tip" title="Tip"></i></td><td class="content">If you do not remember your password, go to the <a href="https://www.opentlc.com/account/" target="_blank">OPENTLC Account Management page</a> to reset your password.</td></tr></tbody></table></div></li><li><p>Navigate to <strong>Services → Catalogs → All Services → OPENTLC OpenShift Labs</strong>.</p></li><li><p>On the left, select <strong>OpenShift 4 HA Lab</strong>.</p></li><li><p>On the right, click <strong>Order</strong>.</p></li><li><p>If you are not in North America, click <strong>Lab Parameters</strong> and select your appropriate region.</p></li><li><p>On the bottom right, click <strong>Submit</strong>.</p><div class="admonitionblock warning"><table><tbody><tr><td class="icon"><i class="icon-warning" title="Warning"></i></td><td class="content">Do not select <strong>App Control → Start</strong> after ordering the lab. Ordering the lab automatically begins the build process. Selecting <strong>Start</strong> may corrupt the lab environment or cause other complications.</td></tr></tbody></table></div>
<div class="ulist"><ul><li><p>After a few minutes, expect to receive an email with instructions on how to connect to the environment.</p></li></ul></div></li><li><p>You will receive three e-mails:</p><div class="listingblock"><div class="title">Provisioning started</div><div class="content"><pre class="highlight"><code class="texinfo language-texinfo hljs xml">Provisioning has started on your Red Hat OPENTLC OTLC-LAB-<span class="hljs-tag">&lt;<span class="hljs-title">OpenTLC</span> <span class="hljs-attribute">User</span> <span class="hljs-attribute">Name</span>&gt;</span>-PROD_OCP4_HA_LAB-<span class="hljs-tag">&lt;<span class="hljs-title">GUID</span>&gt;</span> environment.
You will receive more information via email during the build process within the next 30 minutes.</code></pre></div></div>
<div class="listingblock"><div class="title">Provisioning has updated (this means that the VMs have been requested successfully)</div><div class="content"><pre class="highlight"><code class="texinfo language-texinfo hljs coffeescript">Provisioning <span class="hljs-keyword">is</span> continuing <span class="hljs-keyword">for</span> Red Hat OPENTLC service OTLC-LAB-&lt;OpenTLC User Name&gt;-PROD_OCP4_HA_LAB-&lt;GUID&gt;.
You will receive another email <span class="hljs-keyword">when</span> the environment <span class="hljs-keyword">is</span> available within the next <span class="hljs-number">30</span> minutes.</code></pre></div></div>
<div class="listingblock"><div class="title">Provisioning completed</div><div class="content"><pre class="highlight"><code class="texinfo language-texinfo hljs python">Your environment <span class="hljs-keyword">for</span> OTLC-LAB-&lt;OpenTLC User Name&gt;-PROD_OCP4_HA_LAB-&lt;GUID&gt;&gt;_COMPLETED has been provisioned.
Your unique identifier, GUID, <span class="hljs-keyword">is</span>: &lt;GUID&gt;&gt;

Access to the environment will be granted <span class="hljs-keyword">as</span> soon <span class="hljs-keyword">as</span> the environment deployment <span class="hljs-keyword">is</span> complete.

Please refer to your demo instructions <span class="hljs-keyword">for</span> next steps <span class="hljs-keyword">and</span> how to access your environment.

Troubleshooting <span class="hljs-keyword">and</span> Access issues:

Always refer to your lab instructions to understand how to properly access <span class="hljs-keyword">and</span> navigate your environment. If you need help using the SSH client on your computer you can consult http://www.opentlc.com/ssh.html.

NOTICE: Your environment will expire <span class="hljs-keyword">and</span> be deleted <span class="hljs-keyword">in</span> <span class="hljs-number">7</span> day(s) at <span class="hljs-number">2019</span>-<span class="hljs-number">03</span>-<span class="hljs-number">27</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> -<span class="hljs-number">0400</span> <span class="hljs-keyword">and</span> will be idled down after <span class="hljs-number">8</span> hour(s).

In order to conserve resources, we cannot archive <span class="hljs-keyword">or</span> restore any data <span class="hljs-keyword">in</span> this environment. All data will be lost upon expiration.
---

Here <span class="hljs-keyword">is</span> some important information about your environment:

Top level domain: .sandbox999.opentlc.com

WARNING: <span class="hljs-keyword">with</span> great power comes great responsibility. We monitor usage.
Your AWS programmatic access:
aws_access_key_id = &lt; AWS ACCESS KEY &gt;
aws_secret_access_key = &lt; AWS SECRET ACCESS KEY &gt;

SSH Access: ssh &lt;OpenTLC User Name&gt;<span class="hljs-decorator">@bastion.&lt;GUID&gt;.sandbox999.opentlc.com</span>
SSH password: &lt; SSH PASSWORD &gt;
---</code></pre></div></div></li><li><p>Wait until you receive the final e-mail before trying to connect to your environment.</p></li><li><p>Note the GUID (a 4 character ID) of your environment.</p></li><li><p>Note the Top Level domain (<code>sandbox999.opentlc.com</code> in the example above)</p></li><li><p>Note the command to SSH into your bastion.</p></li><li><p>Note the AWS Access credentials provided for the duration of this lab.</p></li><li><p>Finally note the SSH password for your user id. <strong>This password is different from your regular OpenTLC password!</strong></p></li></ol></div>
<div class="sect2"><h3 id="_start_environment_after_shut_down">1.1. Start Environment After Shut Down</h3><div class="paragraph"><p>To conserve resources, the lab environment shuts down automatically after eight hours. In this section, you restart the lab environment for this course after it has shut down automatically.</p></div>
<div class="olist arabic"><ol class="arabic"><li><p>Go to the <a href="https://labs.opentlc.com/" target="_blank">OPENTLC lab portal</a> and use your OPENTLC credentials to log in.</p></li><li><p>Navigate to <strong>Services → My Services</strong> (this should be the screen shown right after logging in).</p></li><li><p>In the list of your services, select your lab environment.</p></li><li><p>Select <strong>App Control → Start</strong> to start your lab environment.</p></li><li><p>Select <strong>Yes</strong> at the <strong>Are you sure?</strong> prompt.</p></li><li><p>On the bottom right, click <strong>Submit</strong>.</p></li></ol></div>
<div class="paragraph"><p>After a few minutes, expect to receive an email letting you know that the lab environment has been started.</p></div></div>
<div class="sect2"><h3 id="_test_server_connections">1.2. Test Server Connections</h3><div class="paragraph"><p>The <code>bastion</code> administration host serves as an access point into the environment and is not part of the OpenShift environment.</p></div>
<div class="olist arabic"><ol class="arabic"><li><p>Connect to your administration host and make sure you can access each of your provisioned hosts:</p><div class="listingblock"><div class="content"><pre>ssh &lt;OpenTLC User Name&gt;@bastion.&lt;GUID&gt;.sandbox&lt;SANDBOXID&gt;.opentlc.com</pre></div></div></li></ol></div>
<div class="admonitionblock note"><table><tbody><tr><td class="icon"><i class="icon-note" title="Note"></i></td><td class="content"><div class="ulist"><ul><li><p>In the labs, "$GUID" is used to represent your 4-character unique
identifier. Your GUID is located at the top of your lab provisioning email.</p></li><li><p>Make sure to replace "$GUID" with your GUID as shown in the example below:</p><div class="listingblock"><div class="content"><pre>ssh wkulhane-redhat.com@bastion.r2d2.sandbox999.opentlc.com</pre></div></div></li><li><p>Red Hat recommends that you create an environment variable so you
do not have to type your GUID each time.</p></li></ul></div></td></tr></tbody></table></div></div></div></div>
<div class="sect1"><h2 id="labexercises">2. Configure the Bastion VM to run the OpenShift Installer</h2><div class="sectionbody"><div class="paragraph"><p>In this section, you prepare the Bastion VM to install OpenShift. This includes installing the AWS Command Line Interface, the OpenShift Installer and the OpenShift CLI.</p></div>
<div class="admonitionblock tip"><table><tbody><tr><td class="icon"><i class="icon-tip" title="Tip"></i></td><td class="content">Simple instructions alongside access credentials are available on <a href="https://cloud.openshift.com/clusters/install">https://cloud.openshift.com/clusters/install</a></td></tr></tbody></table></div>
<div class="sect2"><h3 id="_set_up_installation_prerequisites">2.1. Set up Installation Prerequisites</h3><div class="olist arabic"><ol class="arabic"><li><p>Connect to your Bastion instance as indicated in your welcome e-mail.</p></li><li><p>After connecting to your Bastion instance (AKA workstation, AKA bastion) switch to root using the <code>sudo</code> command and save your GUID to <code>.bashrc</code>.</p><div class="listingblock"><div class="content"><pre class="highlight"><code class="sh language-sh hljs bash">sudo -i
<span class="hljs-built_in">export</span> GUID=`hostname | awk -F. <span class="hljs-string">'{print $2}'</span>`
<span class="hljs-built_in">echo</span> <span class="hljs-string">"GUID=<span class="hljs-variable">${GUID}</span>"</span> &gt;&gt;<span class="hljs-variable">$HOME</span>/.bashrc</code></pre></div></div></li><li><p>Install AWS cli tools.</p><div class="admonitionblock note"><table><tbody><tr><td class="icon"><i class="icon-note" title="Note"></i></td><td class="content">The OpenShift installer does not actually need these tools. But you will be using the tools to verify your credentials and list created AWS resources later.</td></tr></tbody></table></div>
<div class="listingblock"><div class="content"><pre class="highlight"><code class="sh language-sh hljs bash"><span class="hljs-comment"># Download the latest AWS Command Line Interface</span>
curl <span class="hljs-string">"https://s3.amazonaws.com/aws-cli/awscli-bundle.zip"</span> -o <span class="hljs-string">"awscli-bundle.zip"</span>
unzip awscli-bundle.zip

<span class="hljs-comment"># Install the AWS CLI into /bin/aws</span>
./awscli-bundle/install -i /usr/<span class="hljs-built_in">local</span>/aws -b /bin/aws

<span class="hljs-comment"># Validate that the AWS CLI works</span>
aws --version

<span class="hljs-comment"># Clean up downloaded files</span>
rm -rf /root/awscli-bundle /root/awscli-bundle.zip</code></pre></div></div></li><li><p>Get the OpenShift Installer Binary</p><div class="listingblock"><div class="content"><pre>INSTALLER_VERSION=v0.14.0
wget https://github.com/openshift/installer/releases/download/${INSTALLER_VERSION}/openshift-install-linux-amd64 -O /usr/bin/openshift-install
chmod +x /usr/bin/openshift-install</pre></div></div></li><li><p>Get the <code>oc</code> CLI tool</p><div class="listingblock"><div class="content"><pre>OC_CLI_VERSION=4.0.22
wget https://mirror.openshift.com/pub/openshift-v3/clients/${OC_CLI_VERSION}/linux/oc.tar.gz
tar zxvf oc.tar.gz -C /usr/bin
rm -f oc.tar.gz
chmod +x /usr/bin/oc</pre></div></div></li><li><p>Note that the openshift installer and CLI have been placed in "/usr/bin":</p><div class="listingblock"><div class="content"><pre class="highlight"><code class="sh language-sh hljs bash">ls <span class="hljs-operator">-l</span> /usr/bin/{oc,openshift-install}</code></pre></div></div>
<div class="listingblock"><div class="title">Sample Output</div><div class="content"><pre class="highlight"><code class="texinfo language-texinfo hljs diff"><span class="hljs-deletion">-rwxr-xr-x. 1 root root  64981496 Mar 10 22:23 /usr/bin/oc</span>
<span class="hljs-deletion">-rwxr-xr-x. 1 root root 158636704 Mar  6 00:29 /usr/bin/openshift-install</span></code></pre></div></div></li><li><p>Set up Bash Completion for the OpenShift command line utility.</p><div class="listingblock"><div class="content"><pre class="highlight"><code class="sh language-sh hljs bash">oc completion bash &gt;/etc/bash_completion.d/openshift</code></pre></div></div></li><li><p>Log out of your <code>root</code> shell (<code>Ctrl-D</code> or <code>exit</code>).</p></li><li><p>Set the GUID environment variable for your User ID:</p><div class="listingblock"><div class="content"><pre class="highlight"><code class="sh language-sh hljs bash"><span class="hljs-built_in">export</span> GUID=`hostname | awk -F. <span class="hljs-string">'{print $2}'</span>`
<span class="hljs-built_in">echo</span> <span class="hljs-string">"export GUID=<span class="hljs-variable">${GUID}</span>"</span> &gt;&gt;<span class="hljs-variable">$HOME</span>/.bashrc</code></pre></div></div>
<div class="admonitionblock note"><table><tbody><tr><td class="icon"><i class="icon-note" title="Note"></i></td><td class="content">This is not required for OpenShift Container Platform, but makes our lab environment easier to use.</td></tr></tbody></table></div></li><li><p>Save you provided AWS Credentials into the file $HOME/.aws/credentials (make sure to replace <code>YOURACCESSKEY</code> and <code>YOURSECRETACCESSKEY</code> with your individual credentials.</p><div class="paragraph"><p>The AWS credentials have been supplied in the email received when ordering the environment. You may use an AWS Region closest to your location (<strong>do NOT use us-east-1</strong>):</p></div>
<div class="ulist"><ul><li><p>us-east-2 (Ohio)</p></li><li><p>us-west-1 (California)</p></li><li><p>eu-central-1 (Frankfurt)</p></li><li><p>ap-southeast-1 (Singapore)</p></li></ul></div>
<div class="listingblock"><div class="content"><pre class="highlight"><code class="sh language-sh hljs bash"><span class="hljs-built_in">export</span> AWSKEY=&lt;YOURACCESSKEY&gt;
<span class="hljs-built_in">export</span> AWSSECRETKEY=&lt;YOURSECRETKEY&gt;
<span class="hljs-built_in">export</span> REGION=us-east-<span class="hljs-number">2</span>

mkdir <span class="hljs-variable">$HOME</span>/.aws
cat &lt;&lt; EOF &gt;&gt;  <span class="hljs-variable">$HOME</span>/.aws/credentials
[default]
aws_access_key_id = <span class="hljs-variable">${AWSKEY}</span>
aws_secret_access_key = <span class="hljs-variable">${AWSSECRETKEY}</span>
region = <span class="hljs-variable">$REGION</span>
EOF</code></pre></div></div></li><li><p>Validate that your credentials work:</p><div class="listingblock"><div class="content"><pre class="highlight"><code class="sh language-sh hljs bash">aws sts get-caller-identity</code></pre></div></div></li></ol></div>
<div class="listingblock"><div class="title">Sample Output</div><div class="content"><pre class="highlight"><code class="texinfo language-texinfo hljs json">{
    "<span class="hljs-attribute">Account</span>": <span class="hljs-value"><span class="hljs-string">"627202319003"</span></span>,
    "<span class="hljs-attribute">UserId</span>": <span class="hljs-value"><span class="hljs-string">"AIDAIWFPMSHZP4SXY4AK4"</span></span>,
    "<span class="hljs-attribute">Arn</span>": <span class="hljs-value"><span class="hljs-string">"arn:aws:iam::627202319003:user/wkulhane@redhat.com-35f6"</span>
</span>}</code></pre></div></div>
<div class="olist arabic"><ol class="arabic"><li><p>Using your browser, go to <a href="https://try.openshift.com/">https://try.openshift.com</a>, log in with your Red Hat RHN Account.</p><div class="admonitionblock tip"><table><tbody><tr><td class="icon"><i class="icon-tip" title="Tip"></i></td><td class="content">If you get an error after logging in go back to <a href="https://try.openshift.com/">https://try.openshift.com</a>.</td></tr></tbody></table></div></li><li><p>If you have no clusters (expected), select "Create Self-Managed (manual) cluster". If you already have a cluster, select "Create cluster" and then select "Create Self-Managed" from the dropbox.</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>Ignore all other instructions and <strong>click <code>Copy Pull Secret</code> to place the secret into your Clipboard</strong> and then save to a file. You will need to paste the pull secret into the prompt of the installer later.</p></li><li><p>It would should look similar to the following output (this is just an example). Ensure that your pull secret contains credentials for all three container registries: <strong>quay.io</strong>, <strong>registry.connect.redhat.com</strong>, <strong>registry.redhat.io</strong>:</p><div class="listingblock"><div class="content"><pre class="highlight"><code class="texinfo language-texinfo hljs json">{"<span class="hljs-attribute">auths</span>":<span class="hljs-value">{"<span class="hljs-attribute">cloud.openshift.com</span>":<span class="hljs-value">{"<span class="hljs-attribute">auth</span>":<span class="hljs-value"><span class="hljs-string">"b3BlbnNoaWZ0LXJlbGVhc2UtZGV2K3JocGRzYWRtaW5zcmVkaGF0Y29tMWZyZ3NpZHV6cTJkem5zajNpdzBhdG1samg3OjJMSTFEVTM1MFVCQks1ODRCTFVBODBFTTUABDDD13RDI0Qko2Q0I5VzNFSFIzS0pSSFhOSFgyVllNMlFFMVQ="</span></span>,"<span class="hljs-attribute">email</span>":<span class="hljs-value"><span class="hljs-string">"youremail@redhat.com"</span></span>}</span>,"<span class="hljs-attribute">quay.io</span>":<span class="hljs-value">{"<span class="hljs-attribute">auth</span>":<span class="hljs-value"><span class="hljs-string">"b3BlbnNoaWZ0LXJlbGVhc2UtZGV2K3JocGRzYWRtaW5zcmVkaGF0Y29tMWZyZ3NpZHV6cTJkem5zajNpdzBhdG1samg3OjJMSTFEVTM1MFVCQks1ODRCTFVBODBFTTUABDDD13RDI0Qko2Q0I5VzNFSFIzS0pSSFhOSFgyVllNMlFFMVQ="</span></span>,"<span class="hljs-attribute">email</span>":<span class="hljs-value"><span class="hljs-string">"youremail@redhat.com"</span></span>}</span>,"<span class="hljs-attribute">registry.connect.redhat.com</span>":<span class="hljs-value">{"<span class="hljs-attribute">auth</span>":<span class="hljs-value"><span class="hljs-string">"NTE1NDg0ODB8dWhjLTFGckdzSURVWlEyRHpuU0ozaVcwQXRtTEpoNzpleUpoYkdjaU9pSlNVelV4TWlKOS5leUp6ZFdJaU9pSXpPR1prTVdJNFpqYzJOamcwTmpKbVlXTTRaVFpsWVRnd09EUTJOMkkzTnlKOS5YUmQ5LS1LQ3kzVlpVbF9ldTc0THpQMFEzOVYwRUVfeWRZOE5pVGRScUlyd2hVRHYtcFF2ZEtLV1ZpVmlaQWF0QkhEUVdmVDB1Z2pfTWIzYmNPUktqSXdBNldQTXYxWTc1RmhYQUg1S2Myc3lnSHVxWTRfZlhSOXJnbW42N0l0MmhiUXJyb3BBNXlaYXpXSzhPeTBJb29VWFAteDBPUjZ2VDJTVGktbm5sblBLbEFSWTBEZkxJYmk3OHZlZXFadUpyUDl4SzlXdnRaOEZOREpzQnlUc2VmeFRoVmtLMDVwVDlhTk9nTkxITGJMeU5sdEc1RE9xU1JiZ1hLMDJ6RXNaU3BwYmZLdVAwNVJYQWljQy14WEZiamtLaFpkYTgwV3lnZDJKcTZXWVF3WW83ZXgtLUh1MEpKeXBTczRINVY0Nm50dTNVRlNVUERBZEJ5VmVDU2RxckpzUWZoSmlpLVdJbXdjWnp6LUNwTlRfNVo0ei1WUkc0aV9hVF9TWnVkQzVySmFLdFpHS1RQWlg0SDlNLWxDeFlHZDJNYzhuWlc4NWVUeTJPYnBVOHA2S19sU3A3Wm15RzhEbWh6bFAtYTQzb0J1V3hJTHg3Y283U3BkOFRyYVNRbjVnaFpvc0VKZGp6X2ljTlFhVktNazFHQjEwbU1uOXJBeGdUcm5qU09aSEZvcXdmX2Y2dnZFWi0ySUp2Qk91UUZRQThsZDlzRDVDb1ZWNEdwTWx1Rl8zZGJqcXhuVTE0WXdHT2RhSldSOEtMTlFwbU9RV0JrWFJIcVpwN01UT0ZDX0dMVDRWeGNTMXhva0p6RUFxN1c4NzBSQVo4VnAtUGdscEJCc2RDT2tfdGNCNEY5T2hkZ0NPb3JMNHJkZmp6cEJobUZuMEhzVkFFNGJkaWhfRjNGSQ=="</span></span>,"<span class="hljs-attribute">email</span>":<span class="hljs-value"><span class="hljs-string">"youremail@redhat.com"</span></span>}</span>,"<span class="hljs-attribute">registry.redhat.io</span>":<span class="hljs-value">{"<span class="hljs-attribute">auth</span>":<span class="hljs-value"><span class="hljs-string">"NTE1NDg0ODB8dWhjLTFGckdzSURVWlEyRHpuU0ozaVcwQXRtTEpoNzpleUpoYkdjaU9pSlNVelV4TWlKOS5leUp6ZFdJaU9pSXpPR1prTVdJNFpqYzJOamcwTmpKbVlXTTRaVFpsWVRnd09EUTJOMkkzTnlKOS5YUmQ5LS1LQ3kzVlpVbF9ldTc0THpQMFEzOVYwRUVfeWRZOE5pVGRScUlyd2hVRHYtcFF2ZEtLV1ZpVmlaQWF0QkhEUVdmVDB1Z2pfTWIzYmNPUktqSXdBNldQTXYxWTc1RmhYQUg1S2Myc3lnSHVxWTRfZlhSOXJnbW42N0l0MmhiUXJyb3BBNXlaYXpXSzhPeTBJb29VWFAteDBPUjZ2VDJTVGktbm5sblBLbEFSWTBEZkxJYmk3OHZlZXFadUpyUDl4SzszrefOEZOREpzQnlUc2VmeFRoVmtLMDVwVDlhTk9nTkxITGJMeU5sdEc1RE9xU1JiZ1hLMDJ6RXNaU3BwYmZLdVAwNVJYQWljQy14WEZiamtLaFpkYTgwV3lnZDJKcTZXWVF3WW83ZXgtLUh1MEpKeXBTczRINVY0Nm50dTNVRlNVUERBZEJ5VmVDU2RxckpzUWZoSmlpLVdJbXdjWnp6LUNwTlRfNVo0ei1WUkc0aV9hVF9TWnVkQzVySmFLdFpHS1RQWlg0SDlNLWxDeFlHZDJNYzhuWlc4NWVUeTJPYnBVOHA2S19sU3A3Wm15RzhEbWh6bFAtYTQzb0J1V3hJTHg3Y283U3BkOFRyYVNRbjVnaFpvc0VKZGp6X2ljTlFhVktNazFHQjEwbU1uOXJBeGdUcm5qU09aSEZvcXdmX2Y2dnZFWi0ySUp2Qk91UUZRQThsZDlzRDVDb1ZWNEdwTWx1Rl8zZGJqcXhuVTE0WXdHT2RhSldSOEtMTlFwbU9RV0JrWFJIcVpwN01UT0ZDX0dMVDRWeGNTMXhva0p6RUFxN1c4NzBSQVo4VnAtUGdscEJCc2RDT2tfdGNCNEY5T2hkZ0NPb3JMNHJkZmp6cEJobUZuMEhzVkFFNGJkaWhfRjNGSQ=="</span></span>,"<span class="hljs-attribute">email</span>":<span class="hljs-value"><span class="hljs-string">"youremail@redhat.com"</span></span>}</span>}</span>}</code></pre></div></div></li></ol></div></li><li><p>Create SSH keypair to be used for your OpenShift environment.</p><div class="listingblock"><div class="content"><pre class="highlight"><code class="sh language-sh hljs bash">ssh-keygen <span class="hljs-operator">-f</span> ~/.ssh/cluster-<span class="hljs-variable">${GUID}</span>-key -N <span class="hljs-string">''</span></code></pre></div></div></li></ol></div></div></div></div>
<div class="sect1"><h2 id="_installing_openshift_container_platform">3. Installing OpenShift Container Platform</h2><div class="sectionbody"><div class="paragraph"><p>In this section you are using the OpenShift installer to deploy a highly available OpenShift Container Platform cluster on AWS.</p></div>
<div class="admonitionblock note"><table><tbody><tr><td class="icon"><i class="icon-note" title="Note"></i></td><td class="content"><div class="paragraph"><p>Documentation for the Installer can be found at <a href="https://github.com/openshift/installer/blob/master/docs/user/overview.md">https://github.com/openshift/installer/blob/master/docs/user/overview.md</a></p></div></td></tr></tbody></table></div>
<div class="paragraph"><p>The main assets generated by the installer are the <a href="https://coreos.com/ignition/docs/latest/what-is-ignition.html"><strong><em>Ignition</em></strong></a> Configs for the bootstrap, master, and worker machines. Given these three configs (and correctly configured infrastructure), it is possible to start an OpenShift cluster. The process for bootstrapping a cluster looks like the following:</p></div>
<div class="olist arabic"><ol class="arabic"><li><p>The bootstrap machine boots and starts hosting the remote resources required for the master machines to boot.</p></li><li><p>The master machines fetch the remote resources from the bootstrap machine and finish booting.</p></li><li><p>The master machines use the bootstrap node to form an etcd cluster.</p></li><li><p>The bootstrap node starts a temporary Kubernetes control plane using the newly-created etcd cluster.</p></li><li><p>The temporary control plane schedules the production control plane to the master machines.</p></li><li><p>The temporary control plane shuts down, yielding to the production control plane.</p></li><li><p>The bootstrap node injects OpenShift-specific components into the newly formed control plane.</p></li><li><p>The installer then tears down the bootstrap node.</p></li></ol></div>
<div class="paragraph"><p>The result of this bootstrapping process is a fully running OpenShift cluster. The cluster will then download and configure remaining components needed for the day-to-day operation, including the creation of worker machines in supported platforms.</p></div>
<div class="paragraph"><p>The installer uses a Wizard approach asking a few questions about the environment before executing the installation. If you want to avoid the wizard or run the installer from a Shell Script, it is useful to setup a set of env vars for a particular cloud platform.</p></div>
<div class="sect2"><h3 id="_run_the_openshift_installer">3.1. Run the OpenShift Installer</h3><div class="admonitionblock caution"><table><tbody><tr><td class="icon"><i class="icon-caution" title="Caution"></i></td><td class="content">The Installer is currently in Beta and you might encounter failures. Sometimes cleaning up the cluster and trying again is the best path forward. See cleanup instructions below. For more information about installation process use the option <code>--log-level debug</code></td></tr></tbody></table></div>
<div class="olist arabic"><ol class="arabic"><li><p>Run the OpenShift installer to create the <code>install-config.yaml</code> file in directory <code>$HOME/cluster-$GUID</code>. <strong>Do not create the cluster yet</strong>.</p></li><li><p>Answer OpenShift Installer Prompts:</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>Select your Public Key (replace GUID with your assigned GUID)</p></li><li><p>Select <code>aws</code> as the Platform</p></li><li><p>Select any region (<strong>except us-east-1</strong>) close to you for the Region. The default is <code>us-east-2</code>.</p></li><li><p>Select <code>SANDBOX.opentlc.com</code> as the Base Domain.</p></li><li><p>Type <code>cluster-GUID</code> as the Cluster Name (Cluster names need to be unique, replace GUID with your unique ID that you got in the provisioning email)</p></li><li><p>Paste the contents of your Pull Secret when prompted for the Pull Secret (this needs to be the JSON format of the Pull Secret in <strong>one</strong> line, make sure to not include any spaces or white characters.)</p><div class="listingblock"><div class="content"><pre class="highlight"><code class="sh language-sh hljs bash">openshift-install create install-config --dir <span class="hljs-variable">$HOME</span>/cluster-<span class="hljs-variable">${GUID}</span>

? SSH Public Key /root/.ssh/cluster-GUID-key.pub
? Platform aws
? Region us-east-<span class="hljs-number">2</span>
? Base Domain sandboxXXX.opentlc.com
? Cluster Name cluster-GUID
? Pull Secret ***************************************************************************************************************************************************************</code></pre></div></div></li></ol></div></li><li><p>Examine the created <code>install-config.yaml</code> file:</p><div class="listingblock"><div class="content"><pre class="highlight"><code class="sh language-sh hljs bash">cat cluster-<span class="hljs-variable">$GUID</span>/install-config.yaml</code></pre></div></div>
<div class="listingblock"><div class="title">Sample Output</div><div class="content"><pre class="highlight"><code class="texinfo language-texinfo hljs makefile">apiVersion: v1beta3
baseDomain: sandboxXXX.opentlc.com
<span class="hljs-title">compute:</span>
- name: worker
  platform: {}
  replicas: 3
<span class="hljs-title">controlPlane:</span>
  name: master
  platform: {}
  replicas: 3
<span class="hljs-title">metadata:</span>
  creationTimestamp: null
  name: cluster-GUID
<span class="hljs-title">networking:</span>
  clusterNetworks:
  - cidr: 10.128.0.0/14
    hostSubnetLength: 9
  machineCIDR: 10.0.0.0/16
  serviceCIDR: 172.30.0.0/16
  type: OpenShiftSDN
<span class="hljs-title">platform:</span>
  aws:
    region: us-east-2
pullSecret: '&lt;PULL SECRET&gt;'
sshKey: |
  ssh-rsa &lt;SSH KEY&gt;</code></pre></div></div></li><li><p>Change the <code>install-config.yaml</code> file to request only 2 worker nodes instead of the default of 3.</p><div class="listingblock"><div class="content"><pre class="highlight"><code class="texinfo language-texinfo hljs css"><span class="hljs-tag">apiVersion</span>: <span class="hljs-tag">v1beta3</span>
<span class="hljs-tag">baseDomain</span>: <span class="hljs-tag">ede2</span><span class="hljs-class">.ocp4</span><span class="hljs-class">.opentlc</span><span class="hljs-class">.com</span>
<span class="hljs-tag">compute</span>:
<span class="hljs-tag">-</span> <span class="hljs-tag">name</span>: <span class="hljs-tag">worker</span>
  <span class="hljs-tag">platform</span>: <span class="hljs-rules">{<span class="hljs-rule">}</span></span>
  <span class="hljs-tag">replicas</span>: 2
<span class="hljs-attr_selector">[...]</span></code></pre></div></div></li><li><p>Because the installer consumes and then deletes the <code>install-config.yaml</code> file it is a good idea to save this file for later reference.</p><div class="listingblock"><div class="content"><pre class="highlight"><code class="sh language-sh hljs bash">cp <span class="hljs-variable">$HOME</span>/cluster-<span class="hljs-variable">$GUID</span>/install-config.yaml <span class="hljs-variable">$HOME</span>/cluster-<span class="hljs-variable">$GUID</span>/install-config.org</code></pre></div></div></li><li><p>Use the OpenShift Installer to generate the Ignition Configuration Files.</p><div class="listingblock"><div class="content"><pre class="highlight"><code class="sh language-sh hljs bash">openshift-install create ignition-configs --dir=<span class="hljs-variable">$HOME</span>/cluster-<span class="hljs-variable">$GUID</span></code></pre></div></div>
<div class="listingblock"><div class="title">Sample Output</div><div class="content"><pre class="highlight"><code class="texinfo language-texinfo hljs cs">INFO Consuming <span class="hljs-string">"Install Config"</span> <span class="hljs-keyword">from</span> target directory</code></pre></div></div></li><li><p>Examine the created files in $HOME/cluster-$GUID.</p><div class="admonitionblock warning"><table><tbody><tr><td class="icon"><i class="icon-warning" title="Warning"></i></td><td class="content">Modifying the Ignition Template files is <strong>unsupported</strong> in OCP 4.0.</td></tr></tbody></table></div></li><li><p>Notice that there are the following files:</p><div class="ulist"><ul><li><p><code>bootstrap.ign</code>: The configuration of the Bootstrap VM</p></li><li><p><code>master.ign</code>: The configuration of the Master nodes</p></li><li><p><code>worker.ign</code>: The configuration fo the worker nodes</p></li><li><p><code>metadata.json</code>: Information about the cluster. AWS Region, Cluster ID, Cluster Name</p></li><li><p><code>auth</code>: A directory containing the authentication credentials for system:admin.</p></li></ul></div></li><li><p>Use the OpenShift Installer to create the Manifest Templates.</p><div class="listingblock"><div class="content"><pre class="highlight"><code class="sh language-sh hljs bash">openshift-install create manifest-templates --dir=<span class="hljs-variable">$HOME</span>/cluster-<span class="hljs-variable">$GUID</span></code></pre></div></div></li><li><p>Examine the created templates in $HOME/cluster-$GUID/templates.</p><div class="admonitionblock warning"><table><tbody><tr><td class="icon"><i class="icon-warning" title="Warning"></i></td><td class="content">Modifying the Manifest Template files is <strong>unsupported</strong> in OCP 4.0.</td></tr></tbody></table></div></li><li><p>Use the OpenShift Installer to create the Manifests.</p><div class="listingblock"><div class="content"><pre class="highlight"><code class="sh language-sh hljs bash">openshift-install create manifests --dir=<span class="hljs-variable">$HOME</span>/cluster-<span class="hljs-variable">$GUID</span></code></pre></div></div>
<div class="listingblock"><div class="title">Sample Output</div><div class="content"><pre class="highlight"><code class="texinfo language-texinfo hljs cs">INFO Consuming <span class="hljs-string">"Master Ignition Config"</span> <span class="hljs-keyword">from</span> target directory
INFO Consuming <span class="hljs-string">"Worker Ignition Config"</span> <span class="hljs-keyword">from</span> target directory</code></pre></div></div></li><li><p>Examine the created Manifests in $HOME/cluster-$GUID/manifests</p><div class="admonitionblock warning"><table><tbody><tr><td class="icon"><i class="icon-warning" title="Warning"></i></td><td class="content">Modifying the Manifest files is <strong>unsupported</strong> in OCP 4.0.</td></tr></tbody></table></div>
<div class="listingblock"><div class="content"><pre class="highlight"><code class="sh language-sh hljs bash">ls <span class="hljs-variable">$HOME</span>/cluster-<span class="hljs-variable">$GUID</span>/manifests</code></pre></div></div>
<div class="listingblock"><div class="title">Sample Output</div><div class="content"><pre class="highlight"><code class="texinfo language-texinfo hljs perl"><span class="hljs-number">04</span>-openshift-machine-config-operator.yaml  host-etcd-service-endpoints.yaml
cluster-config.yaml                        host-etcd-service.yaml
cluster-dns-<span class="hljs-number">02</span>-config.yml                  kube-cloud-config.yaml
cluster-infrastructure-<span class="hljs-number">02</span>-config.yml       kube-<span class="hljs-keyword">system</span>-configmap-etcd-serving-ca.yaml
cluster-ingress-<span class="hljs-number">02</span>-config.yml              kube-<span class="hljs-keyword">system</span>-configmap-root-ca.yaml
cluster-network-<span class="hljs-number">01</span>-crd.yml                 kube-<span class="hljs-keyword">system</span>-secret-etcd-client.yaml
cluster-network-<span class="hljs-number">02</span>-config.yml              machine-config-server-tls-secret.yaml
cvo-overrides.yaml                         pull.json
etcd-service.yaml</code></pre></div></div></li><li><p>Finally use the OpenShift installer to create the cluster.</p><div class="listingblock"><div class="content"><pre class="highlight"><code class="sh language-sh hljs bash">openshift-install create cluster --dir=<span class="hljs-variable">$HOME</span>/cluster-<span class="hljs-variable">$GUID</span></code></pre></div></div>
<div class="listingblock"><div class="title">Sample Output</div><div class="content"><pre class="highlight"><code class="texinfo language-texinfo hljs coffeescript">INFO Consuming <span class="hljs-string">"Openshift Manifests"</span> from target directory
INFO Consuming <span class="hljs-string">"Common Manifests"</span> from target directory
INFO Consuming <span class="hljs-string">"Master Machines"</span> from target directory
INFO Consuming <span class="hljs-string">"Bootstrap Ignition Config"</span> from target directory
INFO Consuming <span class="hljs-string">"Kubeconfig Admin Client"</span> from target directory
INFO Creating cluster...
INFO Waiting up to <span class="hljs-number">30</span>m0s <span class="hljs-keyword">for</span> the Kubernetes API...
INFO API v1<span class="hljs-number">.12</span><span class="hljs-number">.4</span>+c547bc3e86 up
INFO Waiting up to <span class="hljs-number">30</span>m0s <span class="hljs-keyword">for</span> the bootstrap-complete event...
WARNING RetryWatcher - getting event failed! Re-creating the watcher. Last <span class="hljs-attribute">RV</span>: <span class="hljs-number">3521</span>
INFO Destroying the bootstrap resources...
INFO Waiting up to <span class="hljs-number">30</span>m0s <span class="hljs-keyword">for</span> the cluster to initialize...
INFO Waiting up to <span class="hljs-number">10</span>m0s <span class="hljs-keyword">for</span> the openshift-<span class="hljs-built_in">console</span> route to be created...
INFO Install complete!
INFO Run <span class="hljs-string">'export KUBECONFIG=/home/wkulhane-redhat.com/cluster-ede2/auth/kubeconfig'</span> to manage the cluster <span class="hljs-reserved">with</span> <span class="hljs-string">'oc'</span>, the OpenShift CLI.
INFO The cluster <span class="hljs-keyword">is</span> ready <span class="hljs-keyword">when</span> <span class="hljs-string">'oc login -u kubeadmin -p Pb7FF-hVyPa-KZhuj-mjq9v'</span> succeeds (wait a few minutes).
INFO Access the OpenShift web-<span class="hljs-built_in">console</span> <span class="hljs-attribute">here</span>: <span class="hljs-attribute">https</span>:<span class="hljs-regexp">//</span><span class="hljs-built_in">console</span>-openshift-<span class="hljs-built_in">console</span>.apps.cluster-ede2.sandboxXXX.opentlc.com
INFO Login to the <span class="hljs-built_in">console</span> <span class="hljs-reserved">with</span> <span class="hljs-attribute">user</span>: kubeadmin, <span class="hljs-attribute">password</span>: Pb7FF-hVyPa-KZhuj-mjq9v</code></pre></div></div>
<div class="admonitionblock tip"><table><tbody><tr><td class="icon"><i class="icon-tip" title="Tip"></i></td><td class="content">If you want to follow along the install you can tail the file <code>.openshift_install.log</code> from another Terminal Window. This file is also useful for troubleshooting.</td></tr></tbody></table></div></li><li><p>Make note of the output of the install command:</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>Location of the <code>kubeconfig</code> file. required for setting the KUBECONFIG environment variable as suggested sets the OpenShift user id to <strong>system:admin</strong>.</p></li><li><p><code>kubeadmin</code> userid and associated password (<code>tNSkJ-fDQy4-HYBtA-NZmkB</code> in the example above)</p></li><li><p>The password for the <code>kubeadmin</code> user is also written into the file <code>auth/kubeadmin-password</code>.</p></li><li><p>URL of the Web Console (<code>https://console-openshift-console.apps.cluster-GUID.GUID.ocp4.opentlc.com</code> in the example above) and the credentials (again) to log into the web console.</p></li></ol></div></li><li><p>If you ever need this information again it is available in the file $HOME/cluster-$GUID/.openshift_install.log</p><div class="listingblock"><div class="content"><pre class="highlight"><code class="sh language-sh hljs bash">tail -<span class="hljs-number">4</span> <span class="hljs-variable">$HOME</span>/cluster-<span class="hljs-variable">$GUID</span>/.openshift_install.log</code></pre></div></div></li></ol></div>
<div class="admonitionblock note"><table><tbody><tr><td class="icon"><i class="icon-note" title="Note"></i></td><td class="content"><div class="paragraph"><p><strong>Cluster Cleanup - [Run only if installation fails]</strong></p></div>
<div class="admonitionblock warning"><table><tbody><tr><td class="icon"><i class="icon-warning" title="Warning"></i></td><td class="content">If the installer fails, and does not provide login information, use the cleanup command before retrying to install.
Feel free to use <code>oc</code> commands to explore the failure.
To clean up the environment:</td></tr></tbody></table></div>
<div class="olist arabic"><ol class="arabic"><li><p>To delete the cluster run the following command:</p><div class="listingblock"><div class="content"><pre class="highlight"><code class="sh language-sh hljs bash">openshift-install destroy cluster --dir <span class="hljs-variable">$HOME</span>/cluster-<span class="hljs-variable">${GUID}</span></code></pre></div></div></li><li><p>Delete all files created by the OpenShift installer.</p><div class="listingblock"><div class="content"><pre class="highlight"><code class="sh language-sh hljs bash">rm -rf <span class="hljs-variable">$HOME</span>/.kube
rm -rf <span class="hljs-variable">$HOME</span>/cluster-<span class="hljs-variable">${GUID}</span>/auth/
rm <span class="hljs-operator">-f</span> <span class="hljs-variable">$HOME</span>/cluster-<span class="hljs-variable">${GUID}</span>/terraform.tfstate
rm <span class="hljs-operator">-f</span> <span class="hljs-variable">$HOME</span>/cluster-<span class="hljs-variable">${GUID}</span>/.openshift_install*
rm <span class="hljs-operator">-f</span> <span class="hljs-variable">$HOME</span>/cluster-<span class="hljs-variable">${GUID}</span>/metadata.json</code></pre></div></div></li></ol></div></td></tr></tbody></table></div></div></div></div>
<div class="sect1"><h2 id="_validating_the_cluster">4. Validating the Cluster</h2><div class="sectionbody"><div class="olist arabic"><ol class="arabic"><li><p>Log into the CLI using the provided <code>kubeadmin</code> account (using the password provided to you by the installer):</p><div class="listingblock"><div class="content"><pre class="highlight"><code class="sh language-sh hljs bash"><span class="hljs-built_in">export</span> KUBECONFIG=<span class="hljs-variable">$HOME</span>/cluster-<span class="hljs-variable">$GUID</span>/auth/kubeconfig
oc login -u kubeadmin -p yUjiD-gPhqh<span class="hljs-operator">-s</span>WdGh-yTJo9</code></pre></div></div></li><li><p>Validate that all nodes are Ready (you should see three master and two worker nodes):</p><div class="listingblock"><div class="content"><pre class="highlight"><code class="sh language-sh hljs bash">oc get nodes</code></pre></div></div>
<div class="listingblock"><div class="title">Sample Output</div><div class="content"><pre class="highlight nowrap"><code class="texinfo language-texinfo hljs cpp">NAME                                         STATUS   ROLES    AGE   VERSION
ip-<span class="hljs-number">10</span>-<span class="hljs-number">0</span>-<span class="hljs-number">129</span>-<span class="hljs-number">32.u</span>s-east-<span class="hljs-number">2.</span>compute.internal    Ready    worker   <span class="hljs-number">44</span>m   v1<span class="hljs-number">.12</span><span class="hljs-number">.4</span>+<span class="hljs-number">4</span>dd65df23d
ip-<span class="hljs-number">10</span>-<span class="hljs-number">0</span>-<span class="hljs-number">138</span>-<span class="hljs-number">60.u</span>s-east-<span class="hljs-number">2.</span>compute.internal    Ready    master   <span class="hljs-number">64</span>m   v1<span class="hljs-number">.12</span><span class="hljs-number">.4</span>+<span class="hljs-number">4</span>dd65df23d
ip-<span class="hljs-number">10</span>-<span class="hljs-number">0</span>-<span class="hljs-number">153</span>-<span class="hljs-number">246.u</span>s-east-<span class="hljs-number">2.</span>compute.internal   Ready    worker   <span class="hljs-number">44</span>m   v1<span class="hljs-number">.12</span><span class="hljs-number">.4</span>+<span class="hljs-number">4</span>dd65df23d
ip-<span class="hljs-number">10</span>-<span class="hljs-number">0</span>-<span class="hljs-number">159</span>-<span class="hljs-number">192.u</span>s-east-<span class="hljs-number">2.</span>compute.internal   Ready    master   <span class="hljs-number">63</span>m   v1<span class="hljs-number">.12</span><span class="hljs-number">.4</span>+<span class="hljs-number">4</span>dd65df23d
ip-<span class="hljs-number">10</span>-<span class="hljs-number">0</span>-<span class="hljs-number">163</span>-<span class="hljs-number">219.u</span>s-east-<span class="hljs-number">2.</span>compute.internal   Ready    master   <span class="hljs-number">64</span>m   v1<span class="hljs-number">.12</span><span class="hljs-number">.4</span>+<span class="hljs-number">4</span>dd65df23d</code></pre></div></div></li><li><p>Validate that all pods are running. There should be around 164 total and 118 running pods (for the 0.14.0 installer). Make sure there are no pods in <code>Error</code> or <code>CrashLoopBackoff</code> states.</p><div class="listingblock"><div class="content"><pre class="highlight"><code class="sh language-sh hljs bash">oc get pod --all-namespaces</code></pre></div></div>
<div class="listingblock"><div class="title">Sample Output</div><div class="content"><pre class="highlight nowrap"><code class="texinfo language-texinfo hljs cs">NAMESPACE                                     NAME                                                           READY   STATUS             RESTARTS   AGE
kube-system                                   etcd-member-ip-<span class="hljs-number">10</span>-<span class="hljs-number">0</span>-<span class="hljs-number">133</span>-<span class="hljs-number">213.</span>ec2.<span class="hljs-keyword">internal</span>                       <span class="hljs-number">1</span>/<span class="hljs-number">1</span>     Running            <span class="hljs-number">0</span>          <span class="hljs-number">149</span>m
kube-system                                   etcd-member-ip-<span class="hljs-number">10</span>-<span class="hljs-number">0</span>-<span class="hljs-number">148</span>-<span class="hljs-number">172.</span>ec2.<span class="hljs-keyword">internal</span>                       <span class="hljs-number">1</span>/<span class="hljs-number">1</span>     Running            <span class="hljs-number">0</span>          <span class="hljs-number">149</span>m
kube-system                                   etcd-member-ip-<span class="hljs-number">10</span>-<span class="hljs-number">0</span>-<span class="hljs-number">160</span>-<span class="hljs-number">101.</span>ec2.<span class="hljs-keyword">internal</span>                       <span class="hljs-number">1</span>/<span class="hljs-number">1</span>     Running            <span class="hljs-number">0</span>          <span class="hljs-number">150</span>m
openshift-apiserver-<span class="hljs-keyword">operator</span>                  openshift-apiserver-<span class="hljs-keyword">operator</span>-<span class="hljs-number">7597</span>b7665-sjj4r                   <span class="hljs-number">1</span>/<span class="hljs-number">1</span>     Running            <span class="hljs-number">1</span>          <span class="hljs-number">140</span>m
openshift-apiserver                           apiserver-<span class="hljs-number">8</span>j9rf                                                <span class="hljs-number">1</span>/<span class="hljs-number">1</span>     Running            <span class="hljs-number">0</span>          <span class="hljs-number">24</span>m
openshift-apiserver                           apiserver-qpn74                                                <span class="hljs-number">1</span>/<span class="hljs-number">1</span>     Running            <span class="hljs-number">0</span>          <span class="hljs-number">25</span>m
openshift-apiserver                           apiserver-s7mfw                                                <span class="hljs-number">1</span>/<span class="hljs-number">1</span>     Running            <span class="hljs-number">0</span>          <span class="hljs-number">25</span>m
openshift-authentication-<span class="hljs-keyword">operator</span>             openshift-authentication-<span class="hljs-keyword">operator</span>-<span class="hljs-number">56</span>f57d564-<span class="hljs-number">9</span>vmgw              <span class="hljs-number">1</span>/<span class="hljs-number">1</span>     Running            <span class="hljs-number">0</span>          <span class="hljs-number">148</span>m

[...]

openshift-service-cert-signer                 apiservice-cabundle-injector-<span class="hljs-number">5</span>d9c868c47-v7wzg                  <span class="hljs-number">1</span>/<span class="hljs-number">1</span>     Running            <span class="hljs-number">0</span>          <span class="hljs-number">148</span>m
openshift-service-cert-signer                 configmap-cabundle-injector-<span class="hljs-number">5</span>cd8d558f8-wshpg                   <span class="hljs-number">1</span>/<span class="hljs-number">1</span>     Running            <span class="hljs-number">0</span>          <span class="hljs-number">148</span>m
openshift-service-cert-signer                 service-serving-cert-signer-<span class="hljs-number">8</span>d8c68647-<span class="hljs-number">7</span>wl7b                    <span class="hljs-number">1</span>/<span class="hljs-number">1</span>     Running            <span class="hljs-number">0</span>          <span class="hljs-number">148</span>m
openshift-svcat-apiserver-<span class="hljs-keyword">operator</span>            openshift-svcat-apiserver-<span class="hljs-keyword">operator</span>-<span class="hljs-number">696</span>cc9f79b-lpk9j            <span class="hljs-number">1</span>/<span class="hljs-number">1</span>     Running            <span class="hljs-number">0</span>          <span class="hljs-number">138</span>m
openshift-svcat-controller-manager-<span class="hljs-keyword">operator</span>   openshift-svcat-controller-manager-<span class="hljs-keyword">operator</span>-<span class="hljs-number">78</span>bcdd66b9-fzrwz   <span class="hljs-number">1</span>/<span class="hljs-number">1</span>     Running            <span class="hljs-number">1</span>          <span class="hljs-number">138</span>m</code></pre></div></div></li><li><p>Open your web browser and use the Web Console URL <a href="https://console-openshift-console.apps.cluster-guid.guid.ocp4.opentlc.com/">https://console-openshift-console.apps.cluster-GUID.GUID.ocp4.opentlc.com</a> and <code>kubeadmin</code> credentials to log into the OpenShift cluster. You will need to accept self-signed (insecure) certificates in order to see the login screen.</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>Make sure to replace GUID twice in the link for the console.</p></li></ol></div></li><li><p>Explore the various areas of the Web Console.</p><div class="admonitionblock caution"><table><tbody><tr><td class="icon"><i class="icon-caution" title="Caution"></i></td><td class="content">We have seen some web browsers having issues with the console in the Beta version, if the page hangs try another browser type. Also prepare to see parts that or incomplete or "broken" in this Beta version.</td></tr></tbody></table></div></li></ol></div>
<div class="sect2"><h3 id="_aws_verification">4.1. AWS Verification</h3><div class="paragraph"><p>Using the AWS Command Line Interface you can examine the created instances.</p></div>
<div class="olist arabic"><ol class="arabic"><li><p>List all EC2 instances that have been created:</p><div class="listingblock"><div class="content"><pre class="highlight"><code class="sh language-sh hljs bash">aws ec2 describe-instances --region=us-east-<span class="hljs-number">2</span> --filters <span class="hljs-string">"Name=tag:clusterid,Values=cluster-<span class="hljs-variable">${GUID}</span>-*"</span> --output table</code></pre></div></div></li><li><p>List all created resources:</p><div class="listingblock"><div class="content"><pre class="highlight"><code class="sh language-sh hljs bash">openshift-install graph</code></pre></div></div>
<div class="listingblock"><div class="title">Sample Output</div><div class="content"><pre class="highlight"><code class="texinfo language-texinfo hljs bash">digraph G {
	<span class="hljs-string">"installconfig.InstallConfig"</span>-&gt;<span class="hljs-string">"Target Install Config"</span>;
	<span class="hljs-string">"installconfig.clusterID"</span>-&gt;<span class="hljs-string">"installconfig.InstallConfig"</span>;
	<span class="hljs-string">"installconfig.sshPublicKey"</span>-&gt;<span class="hljs-string">"installconfig.InstallConfig"</span>;
	<span class="hljs-string">"installconfig.baseDomain"</span>-&gt;<span class="hljs-string">"installconfig.InstallConfig"</span>;
	<span class="hljs-string">"installconfig.clusterName"</span>-&gt;<span class="hljs-string">"installconfig.InstallConfig"</span>;
	<span class="hljs-string">"installconfig.pullSecret"</span>-&gt;<span class="hljs-string">"installconfig.InstallConfig"</span>;
	<span class="hljs-string">"installconfig.platform"</span>-&gt;<span class="hljs-string">"installconfig.InstallConfig"</span>;
	<span class="hljs-string">"templates.Templates"</span>-&gt;<span class="hljs-string">"Target Manifest templates"</span>;

[...]

	<span class="hljs-string">"tls.KubeletServingCABundle"</span>;
	<span class="hljs-string">"tls.MCSCertKey"</span>;
	<span class="hljs-string">"tls.RootCA"</span>;
	<span class="hljs-string">"tls.ServiceAccountKeyPair"</span>;

}
;

}</code></pre></div></div></li></ol></div></div></div></div>
<div class="sect1"><h2 id="_exploring_the_cluster">5. Exploring the Cluster</h2><div class="sectionbody"><div class="paragraph"><p>In this section you get to explore the Cluster that you just installed.</p></div>
<div class="olist arabic"><ol class="arabic"><li><p>List all the projects in the cluster and try to understand what they do.</p><div class="listingblock"><div class="content"><pre class="highlight"><code class="sh language-sh hljs bash">oc get projects</code></pre></div></div>
<div class="listingblock"><div class="title">Sample Output</div><div class="content"><pre class="highlight"><code class="texinfo language-texinfo hljs cpp">NAME                                          DISPLAY NAME   STATUS
<span class="hljs-keyword">default</span>                                                      Active
kube-<span class="hljs-keyword">public</span>                                                  Active
kube-system                                                  Active
openshift                                                    Active
openshift-apiserver                                          Active
openshift-apiserver-<span class="hljs-keyword">operator</span>                                 Active
openshift-authentication                                     Active
openshift-authentication-<span class="hljs-keyword">operator</span>                            Active
openshift-cloud-credential-<span class="hljs-keyword">operator</span>                          Active
openshift-cluster-machine-approver                           Active
openshift-cluster-node-tuning-<span class="hljs-keyword">operator</span>                       Active
openshift-cluster-samples-<span class="hljs-keyword">operator</span>                           Active
openshift-cluster-storage-<span class="hljs-keyword">operator</span>                           Active
openshift-cluster-version                                    Active
openshift-config                                             Active
openshift-config-managed                                     Active
openshift-console                                            Active
openshift-console-<span class="hljs-keyword">operator</span>                                   Active
openshift-controller-manager                                 Active
openshift-controller-manager-<span class="hljs-keyword">operator</span>                        Active
openshift-core-operators                                     Active
openshift-dns                                                Active
openshift-dns-<span class="hljs-keyword">operator</span>                                       Active
openshift-image-registry                                     Active
openshift-infra                                              Active
openshift-ingress                                            Active
openshift-ingress-<span class="hljs-keyword">operator</span>                                   Active
openshift-kube-apiserver                                     Active
openshift-kube-apiserver-<span class="hljs-keyword">operator</span>                            Active
openshift-kube-controller-manager                            Active
openshift-kube-controller-manager-<span class="hljs-keyword">operator</span>                   Active
openshift-kube-scheduler                                     Active
openshift-kube-scheduler-<span class="hljs-keyword">operator</span>                            Active
openshift-machine-api                                        Active
openshift-machine-config-<span class="hljs-keyword">operator</span>                            Active
openshift-marketplace                                        Active
openshift-monitoring                                         Active
openshift-multus                                             Active
openshift-network-<span class="hljs-keyword">operator</span>                                   Active
openshift-node                                               Active
openshift-<span class="hljs-keyword">operator</span>-lifecycle-manager                         Active
openshift-operators                                          Active
openshift-sdn                                                Active
openshift-service-cert-signer                                Active
openshift-svcat-apiserver-<span class="hljs-keyword">operator</span>                           Active
openshift-svcat-controller-manager-<span class="hljs-keyword">operator</span>                  Active</code></pre></div></div></li><li><p>Check the <code>default</code> project. What is in the <code>default</code> project? What has changed from OCP 3 to OCP4?</p><div class="listingblock"><div class="content"><pre class="highlight"><code class="sh language-sh hljs bash">oc get all -n default</code></pre></div></div>
<div class="listingblock"><div class="title">Sample Output</div><div class="content"><pre class="highlight"><code class="texinfo language-texinfo hljs nginx"><span class="hljs-title">NAME</span>                 TYPE        CLUSTER-IP   EXTERNAL-IP   PORT(S)   AGE
service/kubernetes   ClusterIP   <span class="hljs-number">172.30.0.1</span>   &lt;<span class="hljs-built_in">none</span>&gt;        <span class="hljs-number">443</span>/TCP   <span class="hljs-number">20h</span></code></pre></div></div></li><li><p>Explore which CRDs are created by default in an OCP 4 cluster.</p><div class="listingblock"><div class="content"><pre class="highlight"><code class="sh language-sh hljs bash">oc get crd</code></pre></div></div>
<div class="listingblock"><div class="title">Sample Output</div><div class="content"><pre class="highlight"><code class="texinfo language-texinfo hljs css"><span class="hljs-tag">NAME</span>                                                                     <span class="hljs-tag">CREATED</span> <span class="hljs-tag">AT</span>
<span class="hljs-tag">alertmanagers</span><span class="hljs-class">.monitoring</span><span class="hljs-class">.coreos</span><span class="hljs-class">.com</span>                                      2019<span class="hljs-tag">-03-07T21</span><span class="hljs-pseudo">:04</span><span class="hljs-pseudo">:24Z</span>
<span class="hljs-tag">apiservers</span><span class="hljs-class">.config</span><span class="hljs-class">.openshift</span><span class="hljs-class">.io</span>                                           2019<span class="hljs-tag">-03-07T20</span><span class="hljs-pseudo">:43</span><span class="hljs-pseudo">:12Z</span>
<span class="hljs-tag">authentications</span><span class="hljs-class">.config</span><span class="hljs-class">.openshift</span><span class="hljs-class">.io</span>                                      2019<span class="hljs-tag">-03-07T20</span><span class="hljs-pseudo">:43</span><span class="hljs-pseudo">:13Z</span>
<span class="hljs-tag">authentications</span><span class="hljs-class">.operator</span><span class="hljs-class">.openshift</span><span class="hljs-class">.io</span>                                    2019<span class="hljs-tag">-03-07T20</span><span class="hljs-pseudo">:45</span><span class="hljs-pseudo">:03Z</span>
<span class="hljs-tag">builds</span><span class="hljs-class">.config</span><span class="hljs-class">.openshift</span><span class="hljs-class">.io</span>                                               2019<span class="hljs-tag">-03-07T20</span><span class="hljs-pseudo">:43</span><span class="hljs-pseudo">:13Z</span>
<span class="hljs-tag">catalogsourceconfigs</span><span class="hljs-class">.marketplace</span><span class="hljs-class">.redhat</span><span class="hljs-class">.com</span>                              2019<span class="hljs-tag">-03-07T21</span><span class="hljs-pseudo">:00</span><span class="hljs-pseudo">:19Z</span>
<span class="hljs-tag">catalogsources</span><span class="hljs-class">.operators</span><span class="hljs-class">.coreos</span><span class="hljs-class">.com</span>                                      2019<span class="hljs-tag">-03-07T20</span><span class="hljs-pseudo">:58</span><span class="hljs-pseudo">:26Z</span>
<span class="hljs-tag">clusterautoscalers</span><span class="hljs-class">.autoscaling</span><span class="hljs-class">.openshift</span><span class="hljs-class">.io</span>                              2019<span class="hljs-tag">-03-07T20</span><span class="hljs-pseudo">:58</span><span class="hljs-pseudo">:23Z</span>
<span class="hljs-tag">clusterdnses</span><span class="hljs-class">.dns</span><span class="hljs-class">.openshift</span><span class="hljs-class">.io</span>                                            2019<span class="hljs-tag">-03-07T20</span><span class="hljs-pseudo">:44</span><span class="hljs-pseudo">:25Z</span>
<span class="hljs-tag">clusteringresses</span><span class="hljs-class">.ingress</span><span class="hljs-class">.openshift</span><span class="hljs-class">.io</span>                                    2019<span class="hljs-tag">-03-07T21</span><span class="hljs-pseudo">:00</span><span class="hljs-pseudo">:13Z</span>
<span class="hljs-tag">clusternetworks</span><span class="hljs-class">.network</span><span class="hljs-class">.openshift</span><span class="hljs-class">.io</span>                                     2019<span class="hljs-tag">-03-07T20</span><span class="hljs-pseudo">:44</span><span class="hljs-pseudo">:02Z</span>
<span class="hljs-tag">clusteroperators</span><span class="hljs-class">.config</span><span class="hljs-class">.openshift</span><span class="hljs-class">.io</span>                                     2019<span class="hljs-tag">-03-07T20</span><span class="hljs-pseudo">:43</span><span class="hljs-pseudo">:12Z</span>
<span class="hljs-tag">clusteroperators</span><span class="hljs-class">.operatorstatus</span><span class="hljs-class">.openshift</span><span class="hljs-class">.io</span>                             2019<span class="hljs-tag">-03-07T20</span><span class="hljs-pseudo">:43</span><span class="hljs-pseudo">:26Z</span>
<span class="hljs-tag">clusters</span><span class="hljs-class">.machine</span><span class="hljs-class">.openshift</span><span class="hljs-class">.io</span>                                            2019<span class="hljs-tag">-03-07T20</span><span class="hljs-pseudo">:57</span><span class="hljs-pseudo">:52Z</span>
<span class="hljs-tag">clusterserviceversions</span><span class="hljs-class">.operators</span><span class="hljs-class">.coreos</span><span class="hljs-class">.com</span>                              2019<span class="hljs-tag">-03-07T20</span><span class="hljs-pseudo">:58</span><span class="hljs-pseudo">:23Z</span>
<span class="hljs-tag">clusterversions</span><span class="hljs-class">.config</span><span class="hljs-class">.openshift</span><span class="hljs-class">.io</span>                                      2019<span class="hljs-tag">-03-07T20</span><span class="hljs-pseudo">:43</span><span class="hljs-pseudo">:12Z</span>
<span class="hljs-tag">configs</span><span class="hljs-class">.imageregistry</span><span class="hljs-class">.operator</span><span class="hljs-class">.openshift</span><span class="hljs-class">.io</span>                              2019<span class="hljs-tag">-03-07T21</span><span class="hljs-pseudo">:00</span><span class="hljs-pseudo">:13Z</span>
<span class="hljs-tag">configs</span><span class="hljs-class">.samples</span><span class="hljs-class">.operator</span><span class="hljs-class">.openshift</span><span class="hljs-class">.io</span>                                    2019<span class="hljs-tag">-03-07T21</span><span class="hljs-pseudo">:00</span><span class="hljs-pseudo">:13Z</span>
<span class="hljs-tag">consoles</span><span class="hljs-class">.config</span><span class="hljs-class">.openshift</span><span class="hljs-class">.io</span>                                             2019<span class="hljs-tag">-03-07T20</span><span class="hljs-pseudo">:43</span><span class="hljs-pseudo">:13Z</span>
<span class="hljs-tag">consoles</span><span class="hljs-class">.operator</span><span class="hljs-class">.openshift</span><span class="hljs-class">.io</span>                                           2019<span class="hljs-tag">-03-07T21</span><span class="hljs-pseudo">:00</span><span class="hljs-pseudo">:17Z</span>
<span class="hljs-tag">containerruntimeconfigs</span><span class="hljs-class">.machineconfiguration</span><span class="hljs-class">.openshift</span><span class="hljs-class">.io</span>                2019<span class="hljs-tag">-03-07T20</span><span class="hljs-pseudo">:57</span><span class="hljs-pseudo">:53Z</span>
<span class="hljs-tag">controllerconfigs</span><span class="hljs-class">.machineconfiguration</span><span class="hljs-class">.openshift</span><span class="hljs-class">.io</span>                      2019<span class="hljs-tag">-03-07T20</span><span class="hljs-pseudo">:57</span><span class="hljs-pseudo">:50Z</span>
<span class="hljs-tag">credentialsrequests</span><span class="hljs-class">.cloudcredential</span><span class="hljs-class">.openshift</span><span class="hljs-class">.io</span>                         2019<span class="hljs-tag">-03-07T20</span><span class="hljs-pseudo">:57</span><span class="hljs-pseudo">:39Z</span>
<span class="hljs-tag">dnses</span><span class="hljs-class">.config</span><span class="hljs-class">.openshift</span><span class="hljs-class">.io</span>                                                2019<span class="hljs-tag">-03-07T20</span><span class="hljs-pseudo">:43</span><span class="hljs-pseudo">:13Z</span>
<span class="hljs-tag">egressnetworkpolicies</span><span class="hljs-class">.network</span><span class="hljs-class">.openshift</span><span class="hljs-class">.io</span>                               2019<span class="hljs-tag">-03-07T20</span><span class="hljs-pseudo">:44</span><span class="hljs-pseudo">:03Z</span>
<span class="hljs-tag">features</span><span class="hljs-class">.config</span><span class="hljs-class">.openshift</span><span class="hljs-class">.io</span>                                             2019<span class="hljs-tag">-03-07T20</span><span class="hljs-pseudo">:43</span><span class="hljs-pseudo">:13Z</span>
<span class="hljs-tag">hostsubnets</span><span class="hljs-class">.network</span><span class="hljs-class">.openshift</span><span class="hljs-class">.io</span>                                         2019<span class="hljs-tag">-03-07T20</span><span class="hljs-pseudo">:44</span><span class="hljs-pseudo">:02Z</span>
<span class="hljs-tag">images</span><span class="hljs-class">.config</span><span class="hljs-class">.openshift</span><span class="hljs-class">.io</span>                                               2019<span class="hljs-tag">-03-07T20</span><span class="hljs-pseudo">:43</span><span class="hljs-pseudo">:14Z</span>
<span class="hljs-tag">infrastructures</span><span class="hljs-class">.config</span><span class="hljs-class">.openshift</span><span class="hljs-class">.io</span>                                      2019<span class="hljs-tag">-03-07T20</span><span class="hljs-pseudo">:43</span><span class="hljs-pseudo">:14Z</span>
<span class="hljs-tag">ingresses</span><span class="hljs-class">.config</span><span class="hljs-class">.openshift</span><span class="hljs-class">.io</span>                                            2019<span class="hljs-tag">-03-07T20</span><span class="hljs-pseudo">:43</span><span class="hljs-pseudo">:14Z</span>
<span class="hljs-tag">installplans</span><span class="hljs-class">.operators</span><span class="hljs-class">.coreos</span><span class="hljs-class">.com</span>                                        2019<span class="hljs-tag">-03-07T20</span><span class="hljs-pseudo">:58</span><span class="hljs-pseudo">:24Z</span>
<span class="hljs-tag">kubeapiservers</span><span class="hljs-class">.operator</span><span class="hljs-class">.openshift</span><span class="hljs-class">.io</span>                                     2019<span class="hljs-tag">-03-07T20</span><span class="hljs-pseudo">:45</span><span class="hljs-pseudo">:06Z</span>
<span class="hljs-tag">kubecontrollermanagers</span><span class="hljs-class">.operator</span><span class="hljs-class">.openshift</span><span class="hljs-class">.io</span>                             2019<span class="hljs-tag">-03-07T20</span><span class="hljs-pseudo">:50</span><span class="hljs-pseudo">:51Z</span>
<span class="hljs-tag">kubeletconfigs</span><span class="hljs-class">.machineconfiguration</span><span class="hljs-class">.openshift</span><span class="hljs-class">.io</span>                         2019<span class="hljs-tag">-03-07T20</span><span class="hljs-pseudo">:57</span><span class="hljs-pseudo">:52Z</span>
<span class="hljs-tag">kubeschedulers</span><span class="hljs-class">.operator</span><span class="hljs-class">.openshift</span><span class="hljs-class">.io</span>                                     2019<span class="hljs-tag">-03-07T20</span><span class="hljs-pseudo">:49</span><span class="hljs-pseudo">:08Z</span>
<span class="hljs-tag">machineautoscalers</span><span class="hljs-class">.autoscaling</span><span class="hljs-class">.openshift</span><span class="hljs-class">.io</span>                              2019<span class="hljs-tag">-03-07T20</span><span class="hljs-pseudo">:58</span><span class="hljs-pseudo">:24Z</span>
<span class="hljs-tag">machineclasses</span><span class="hljs-class">.machine</span><span class="hljs-class">.openshift</span><span class="hljs-class">.io</span>                                      2019<span class="hljs-tag">-03-07T20</span><span class="hljs-pseudo">:57</span><span class="hljs-pseudo">:53Z</span>
<span class="hljs-tag">machineconfigpools</span><span class="hljs-class">.machineconfiguration</span><span class="hljs-class">.openshift</span><span class="hljs-class">.io</span>                     2019<span class="hljs-tag">-03-07T20</span><span class="hljs-pseudo">:57</span><span class="hljs-pseudo">:51Z</span>
<span class="hljs-tag">machineconfigs</span><span class="hljs-class">.machineconfiguration</span><span class="hljs-class">.openshift</span><span class="hljs-class">.io</span>                         2019<span class="hljs-tag">-03-07T20</span><span class="hljs-pseudo">:57</span><span class="hljs-pseudo">:49Z</span>
<span class="hljs-tag">machinedeployments</span><span class="hljs-class">.machine</span><span class="hljs-class">.openshift</span><span class="hljs-class">.io</span>                                  2019<span class="hljs-tag">-03-07T20</span><span class="hljs-pseudo">:57</span><span class="hljs-pseudo">:51Z</span>
<span class="hljs-tag">machinehealthchecks</span><span class="hljs-class">.healthchecking</span><span class="hljs-class">.openshift</span><span class="hljs-class">.io</span>                          2019<span class="hljs-tag">-03-07T20</span><span class="hljs-pseudo">:57</span><span class="hljs-pseudo">:54Z</span>
<span class="hljs-tag">machines</span><span class="hljs-class">.machine</span><span class="hljs-class">.openshift</span><span class="hljs-class">.io</span>                                            2019<span class="hljs-tag">-03-07T20</span><span class="hljs-pseudo">:57</span><span class="hljs-pseudo">:49Z</span>
<span class="hljs-tag">machinesets</span><span class="hljs-class">.machine</span><span class="hljs-class">.openshift</span><span class="hljs-class">.io</span>                                         2019<span class="hljs-tag">-03-07T20</span><span class="hljs-pseudo">:57</span><span class="hljs-pseudo">:50Z</span>
<span class="hljs-tag">mcoconfigs</span><span class="hljs-class">.machineconfiguration</span><span class="hljs-class">.openshift</span><span class="hljs-class">.io</span>                             2019<span class="hljs-tag">-03-07T20</span><span class="hljs-pseudo">:57</span><span class="hljs-pseudo">:39Z</span>
<span class="hljs-tag">netnamespaces</span><span class="hljs-class">.network</span><span class="hljs-class">.openshift</span><span class="hljs-class">.io</span>                                       2019<span class="hljs-tag">-03-07T20</span><span class="hljs-pseudo">:44</span><span class="hljs-pseudo">:02Z</span>
<span class="hljs-tag">network-attachment-definitions</span><span class="hljs-class">.k8s</span><span class="hljs-class">.cni</span><span class="hljs-class">.cncf</span><span class="hljs-class">.io</span>                           2019<span class="hljs-tag">-03-07T20</span><span class="hljs-pseudo">:44</span><span class="hljs-pseudo">:00Z</span>
<span class="hljs-tag">networkconfigs</span><span class="hljs-class">.networkoperator</span><span class="hljs-class">.openshift</span><span class="hljs-class">.io</span>                              2019<span class="hljs-tag">-03-07T20</span><span class="hljs-pseudo">:43</span><span class="hljs-pseudo">:15Z</span>
<span class="hljs-tag">networks</span><span class="hljs-class">.config</span><span class="hljs-class">.openshift</span><span class="hljs-class">.io</span>                                             2019<span class="hljs-tag">-03-07T20</span><span class="hljs-pseudo">:43</span><span class="hljs-pseudo">:14Z</span>
<span class="hljs-tag">oauths</span><span class="hljs-class">.config</span><span class="hljs-class">.openshift</span><span class="hljs-class">.io</span>                                               2019<span class="hljs-tag">-03-07T20</span><span class="hljs-pseudo">:43</span><span class="hljs-pseudo">:14Z</span>
<span class="hljs-tag">openshiftapiservers</span><span class="hljs-class">.operator</span><span class="hljs-class">.openshift</span><span class="hljs-class">.io</span>                                2019<span class="hljs-tag">-03-07T20</span><span class="hljs-pseudo">:58</span><span class="hljs-pseudo">:39Z</span>
<span class="hljs-tag">openshiftcontrollermanagers</span><span class="hljs-class">.operator</span><span class="hljs-class">.openshift</span><span class="hljs-class">.io</span>                        2019<span class="hljs-tag">-03-07T20</span><span class="hljs-pseudo">:59</span><span class="hljs-pseudo">:39Z</span>
<span class="hljs-tag">operatorgroups</span><span class="hljs-class">.operators</span><span class="hljs-class">.coreos</span><span class="hljs-class">.com</span>                                      2019<span class="hljs-tag">-03-07T20</span><span class="hljs-pseudo">:58</span><span class="hljs-pseudo">:28Z</span>
<span class="hljs-tag">operatorsources</span><span class="hljs-class">.marketplace</span><span class="hljs-class">.redhat</span><span class="hljs-class">.com</span>                                   2019<span class="hljs-tag">-03-07T21</span><span class="hljs-pseudo">:00</span><span class="hljs-pseudo">:20Z</span>
<span class="hljs-tag">projects</span><span class="hljs-class">.config</span><span class="hljs-class">.openshift</span><span class="hljs-class">.io</span>                                             2019<span class="hljs-tag">-03-07T20</span><span class="hljs-pseudo">:43</span><span class="hljs-pseudo">:15Z</span>
<span class="hljs-tag">prometheuses</span><span class="hljs-class">.monitoring</span><span class="hljs-class">.coreos</span><span class="hljs-class">.com</span>                                       2019<span class="hljs-tag">-03-07T21</span><span class="hljs-pseudo">:04</span><span class="hljs-pseudo">:24Z</span>
<span class="hljs-tag">prometheusrules</span><span class="hljs-class">.monitoring</span><span class="hljs-class">.coreos</span><span class="hljs-class">.com</span>                                    2019<span class="hljs-tag">-03-07T21</span><span class="hljs-pseudo">:04</span><span class="hljs-pseudo">:24Z</span>
<span class="hljs-tag">registries</span><span class="hljs-class">.config</span><span class="hljs-class">.openshift</span><span class="hljs-class">.io</span>                                           2019<span class="hljs-tag">-03-07T20</span><span class="hljs-pseudo">:43</span><span class="hljs-pseudo">:15Z</span>
<span class="hljs-tag">servicecatalogapiservers</span><span class="hljs-class">.operator</span><span class="hljs-class">.openshift</span><span class="hljs-class">.io</span>                           2019<span class="hljs-tag">-03-07T21</span><span class="hljs-pseudo">:00</span><span class="hljs-pseudo">:13Z</span>
<span class="hljs-tag">servicecatalogcontrollermanagers</span><span class="hljs-class">.operator</span><span class="hljs-class">.openshift</span><span class="hljs-class">.io</span>                   2019<span class="hljs-tag">-03-07T21</span><span class="hljs-pseudo">:00</span><span class="hljs-pseudo">:14Z</span>
<span class="hljs-tag">servicecertsigneroperatorconfigs</span><span class="hljs-class">.servicecertsigner</span><span class="hljs-class">.config</span><span class="hljs-class">.openshift</span><span class="hljs-class">.io</span>   2019<span class="hljs-tag">-03-07T20</span><span class="hljs-pseudo">:45</span><span class="hljs-pseudo">:05Z</span>
<span class="hljs-tag">servicemonitors</span><span class="hljs-class">.monitoring</span><span class="hljs-class">.coreos</span><span class="hljs-class">.com</span>                                    2019<span class="hljs-tag">-03-07T21</span><span class="hljs-pseudo">:04</span><span class="hljs-pseudo">:24Z</span>
<span class="hljs-tag">subscriptions</span><span class="hljs-class">.operators</span><span class="hljs-class">.coreos</span><span class="hljs-class">.com</span>                                       2019<span class="hljs-tag">-03-07T20</span><span class="hljs-pseudo">:58</span><span class="hljs-pseudo">:25Z</span>
<span class="hljs-tag">tuneds</span><span class="hljs-class">.tuned</span><span class="hljs-class">.openshift</span><span class="hljs-class">.io</span>                                                2019<span class="hljs-tag">-03-07T21</span><span class="hljs-pseudo">:00</span><span class="hljs-pseudo">:13Z</span></code></pre></div></div></li><li><p>Find all the operators that are running in a newly installed OCP 4 cluster.</p><div class="listingblock"><div class="content"><pre class="highlight"><code class="sh language-sh hljs bash">oc get pod --all-namespaces -o=custom-columns=NAME:.metadata.name | grep operator | sort</code></pre></div></div>
<div class="listingblock"><div class="title">Sample Output</div><div class="content"><pre class="highlight"><code class="texinfo language-texinfo hljs cpp">catalog-<span class="hljs-keyword">operator</span>-<span class="hljs-number">6</span>b87796548-hck6k
certified-operators-<span class="hljs-number">56</span>c4c5867b-k57w7
cloud-credential-<span class="hljs-keyword">operator</span>-<span class="hljs-number">5</span>b66bbd6d6-fxcwg
cluster-autoscaler-<span class="hljs-keyword">operator</span>-<span class="hljs-number">77946</span>df547-<span class="hljs-number">5</span>gnjl
cluster-image-registry-<span class="hljs-keyword">operator</span>-<span class="hljs-number">8548</span>dcf5b8-<span class="hljs-number">7f</span>gvn
cluster-monitoring-<span class="hljs-keyword">operator</span>-<span class="hljs-number">6f</span>c8c9bc75-<span class="hljs-number">47</span>zxs
cluster-node-tuning-<span class="hljs-keyword">operator</span>-<span class="hljs-number">668</span>c989fcf-<span class="hljs-number">227</span>wp
cluster-samples-<span class="hljs-keyword">operator</span>-cc8bcdfd9-<span class="hljs-number">65</span>dgd
cluster-storage-<span class="hljs-keyword">operator</span>-<span class="hljs-number">576</span>b688f4-<span class="hljs-number">7</span>n569
cluster-version-<span class="hljs-keyword">operator</span>-<span class="hljs-number">846497f</span>b4b-bs7jt
community-operators-<span class="hljs-number">7f</span>6bc56c58-ml5b5
console-<span class="hljs-keyword">operator</span>-<span class="hljs-number">67</span>b9746bdb-hfdpf
dns-<span class="hljs-keyword">operator</span>-df89b555d-vr6xb
ingress-<span class="hljs-keyword">operator</span>-<span class="hljs-number">7</span>d74fdfc5f-grhth
kube-apiserver-<span class="hljs-keyword">operator</span>-<span class="hljs-number">7554</span>ccd5b4-bwt4p
kube-controller-manager-<span class="hljs-keyword">operator</span>-<span class="hljs-number">788f</span>7b85-jjzpk
machine-api-<span class="hljs-keyword">operator</span>-<span class="hljs-number">69</span>b6c88cb5-f8xql
machine-config-<span class="hljs-keyword">operator</span>-<span class="hljs-number">64</span>b595bb46-gnv66
marketplace-<span class="hljs-keyword">operator</span>-<span class="hljs-number">6f</span>fbf5466d-fkl74
network-<span class="hljs-keyword">operator</span>-<span class="hljs-number">66</span>d578f86f-wfpvm
olm-<span class="hljs-keyword">operator</span>-<span class="hljs-number">74</span>dbd56c57-gb76l
olm-operators-vt2q9
openshift-apiserver-<span class="hljs-keyword">operator</span>-<span class="hljs-number">7997</span>b9f5ff-shc8q
openshift-authentication-<span class="hljs-keyword">operator</span>-<span class="hljs-number">74f</span>579db49-tcjg4
openshift-controller-manager-<span class="hljs-keyword">operator</span>-<span class="hljs-number">7</span>cdbcb884c-mhgc9
openshift-kube-scheduler-<span class="hljs-keyword">operator</span>-<span class="hljs-number">7</span>b6c65b957-x8qvh
openshift-service-cert-signer-<span class="hljs-keyword">operator</span>-<span class="hljs-number">5</span>c555c755c-ghkcx
openshift-svcat-apiserver-<span class="hljs-keyword">operator</span>-<span class="hljs-number">5f</span>69d6564d-<span class="hljs-number">4</span>cdkk
openshift-svcat-controller-manager-<span class="hljs-keyword">operator</span>-<span class="hljs-number">569f</span>4bc5bc-mhfbs
prometheus-<span class="hljs-keyword">operator</span>-<span class="hljs-number">954644495</span>-rmp6q
redhat-operators-<span class="hljs-number">78f</span>5d67796-hm5qk</code></pre></div></div></li><li><p>Explore the <strong>Cluster Version Operator</strong> by using <code>oc rsh</code> to rsh into the pod and listing all the manitests in <code>/release-manifests</code>.</p></li><li><p>Then explore the contents of the files that make up the <code>cluster-image-registry-operator</code>. <strong>DO NOT CHANGE ANY OF THESE FILES</strong>. How does the Cluster Version Operator determine which file to apply first?</p><div class="listingblock"><div class="content"><pre class="highlight"><code class="sh language-sh hljs bash">oc project openshift-cluster-version
oc get pod

<span class="hljs-comment"># Replace the pod name in the next command with your pod name</span>
oc rsh cluster-version-operator-<span class="hljs-number">6</span>cdd79d47d-<span class="hljs-number">4</span>lr77
sh-<span class="hljs-number">4.2</span><span class="hljs-comment"># ls /release-manifests</span>
sh-<span class="hljs-number">4.2</span><span class="hljs-comment"># ls /release-manifests | grep cluster-image-registry</span>
sh-<span class="hljs-number">4.2</span><span class="hljs-comment"># cat /release-manifests/0000_70_cluster-image-registry-operator_00-crd.yaml</span>
sh-<span class="hljs-number">4.2</span><span class="hljs-comment"># cat /release-manifests/0000_70_cluster-image-registry-operator_02-rbac.yaml</span>
sh-<span class="hljs-number">4.2</span><span class="hljs-comment"># cat /release-manifests/0000_70_cluster-image-registry-operator_04-operator.yaml</span>
sh-<span class="hljs-number">4.2</span><span class="hljs-comment"># exit</span></code></pre></div></div></li><li><p>Explore the Cluster Image Registry Operator.</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>Which project does the Operator run in?</p></li><li><p>What pods run in that project?</p></li><li><p>Is the Cluster Image Registry in the same project as the Operator?</p></li><li><p>What is the Custom Resource that tells the Cluster Image Registry Operator what to do?</p></li><li><p>What can you tell by looking at the <code>status</code> section of the CR?</p></li></ol></div>
<div class="listingblock"><div class="content"><pre class="highlight"><code class="sh language-sh hljs bash">oc project openshift-image-registry
oc get pod
oc get config
oc describe config cluster</code></pre></div></div></li><li><p>Explore the MachineConfig operator</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>Which project does the operator run in?</p></li><li><p>Which CRDs does the operator manage?</p></li><li><p>What do these CRDs represent?</p></li></ol></div>
<div class="listingblock"><div class="content"><pre class="highlight"><code class="sh language-sh hljs bash">oc project openshift-machine-config-operator
oc get crd|grep machineconfiguration</code></pre></div></div></li></ol></div></div></div>
<div class="sect1"><h2 id="_configure_ldap_authentication">6. Configure LDAP Authentication</h2><div class="sectionbody"><div class="paragraph"><p>One of the first post-installation tasks is to set up authentication for end users. OpenShift offers a wide range of authentication providers for example htpasswd, LDAP, SSO, Basic Authentication, GitHub and many more.</p></div>
<div class="paragraph"><p>In this section of the lab you will be setting up the LDAP authentication provider.</p></div>
<div class="paragraph"><p>For LDAP authentication you need the following information. Usually you would get this information from your customer’s LDAP administrator.</p></div>
<table class="tableblock frame-all grid-all" style="width:100%"><colgroup><col style="width:50%"><col style="width:50%"></colgroup><thead><tr><th class="tableblock halign-left valign-top">Property</th><th class="tableblock halign-left valign-top">Value</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock">BindDN</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">uid=admin,cn=users,cn=accounts,dc=shared,dc=example,dc=opentlc,dc=com</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">BindPassword</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">r3dh4t1!</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">url</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">ldaps://ipa.shared.example.opentlc.com:636/cn=users,cn=accounts,dc=shared,dc=example,dc=opentlc,dc=com?uid?sub?(memberOf=cn=ocp-users,cn=groups,cn=accounts,dc=shared,dc=example,dc=opentlc,dc=com)</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Attribute Mapping for ID</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">dn</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Attribute Mapping for email</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">mail</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Attribute Mapping for name</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">cn</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Attribute Mapping for preferredUsername</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">uid</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">CA Certificate</p></td><td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://ipa.shared.example.opentlc.com/ipa/config/ca.crt">http://ipa.shared.example.opentlc.com/ipa/config/ca.crt</a></p></td></tr></tbody></table>
<div class="paragraph"><p>The configuration of the Authentication Provider happens through a cluster-scoped resource of type <code>oauths.config.openshift.io</code>.</p></div>
<div class="olist arabic"><ol class="arabic"><li><p>The LDAP authentication provider expects the server certificate to be provided via a ConfigMap in the <code>openshift-config</code> project. The expected key for the certificate is <code>ca.crt</code>.</p><div class="paragraph"><p>It also expects the bind password to be provided via a secret. The expected key is <code>bindPassword</code>.</p></div>
<div class="paragraph"><p>Retrieve the server certificate then create the ConfigMap <code>opentlc-lda-ca-cert</code> and Secret <code>opentlc-ldap-secret</code> in the <code>openshift-config</code> project.</p></div>
<div class="listingblock"><div class="content"><pre class="highlight"><code class="sh language-sh hljs bash">wget http://ipa.shared.example.opentlc.com/ipa/config/ca.crt -O <span class="hljs-variable">$HOME</span>/ipa-ca.crt
oc create configmap opentlc-ldap-ca-cert --from-file=ca.crt=<span class="hljs-variable">$HOME</span>/ipa-ca.crt -n openshift-config
oc create secret generic opentlc-ldap-secret --from-literal=<span class="hljs-built_in">bind</span>Password=r3dh4t1! -n openshift-config</code></pre></div></div></li><li><p>Finally create the LDAP Provider (use <code>oc apply</code> to replace the default provider with name <code>cluster</code>):</p><div class="listingblock"><div class="content"><pre class="highlight"><code class="sh language-sh hljs bash">cat &lt;&lt; EOF &gt; <span class="hljs-variable">$HOME</span>/opentlc-ldap.yaml
apiVersion: config.openshift.io/v1
kind: OAuth
metadata:
  name: cluster
spec:
  identityProviders:
  - name: ldapidp
    challenge: <span class="hljs-literal">true</span>
    login: <span class="hljs-literal">true</span>
    mappingMethod: claim
    <span class="hljs-built_in">type</span>: LDAP
    ldap:
      attributes:
        id:
        - dn
        email:
        - mail
        name:
        - cn
        preferredUsername:
        - uid
      <span class="hljs-built_in">bind</span>DN: <span class="hljs-string">"uid=admin,cn=users,cn=accounts,dc=shared,dc=example,dc=opentlc,dc=com"</span>
      <span class="hljs-built_in">bind</span>Password:
        name: opentlc-ldap-secret
      insecure: <span class="hljs-literal">false</span>
      ca:
        name: opentlc-ldap-ca-cert
      url: <span class="hljs-string">"ldaps://ipa.shared.example.opentlc.com:636/cn=users,cn=accounts,dc=shared,dc=example,dc=opentlc,dc=com?uid?sub?(memberOf=cn=ocp-users,cn=groups,cn=accounts,dc=shared,dc=example,dc=opentlc,dc=com)"</span>
EOF

oc apply <span class="hljs-operator">-f</span> <span class="hljs-variable">$HOME</span>/opentlc-ldap.yaml</code></pre></div></div>
<div class="listingblock"><div class="title">Sample Output</div><div class="content"><pre class="highlight"><code class="texinfo language-texinfo hljs coffeescript"><span class="hljs-attribute">Warning</span>: oc apply should be used <span class="hljs-literal">on</span> resource created <span class="hljs-keyword">by</span> either oc create --save-config <span class="hljs-keyword">or</span> oc apply
oauth.config.openshift.io/cluster configured</code></pre></div></div></li><li><p>Validate that your config is there:</p><div class="listingblock"><div class="content"><pre class="highlight"><code class="sh language-sh hljs bash">oc get oauths</code></pre></div></div>
<div class="listingblock"><div class="title">Sample Output</div><div class="content"><pre class="highlight"><code class="texinfo language-texinfo hljs nginx"><span class="hljs-title">NAME</span>       AGE
cluster    <span class="hljs-number">2h</span></code></pre></div></div></li><li><p>Make sure you can log into the cluster as user <code>andrew</code>.</p><div class="listingblock"><div class="content"><pre class="highlight"><code class="sh language-sh hljs bash">oc login -u andrew -p r3dh4t1!</code></pre></div></div>
<div class="listingblock"><div class="title">Sample Output</div><div class="content"><pre class="highlight"><code class="texinfo language-texinfo hljs sql">Login successful.

You don't have any projects. You can try to <span class="hljs-operator"><span class="hljs-keyword">create</span> a new project, <span class="hljs-keyword">by</span> running

    oc new-project &lt;projectname&gt;</span></code></pre></div></div></li><li><p>For now switch back to <code>system:admin</code>.</p><div class="listingblock"><div class="content"><pre class="highlight"><code class="sh language-sh hljs bash">oc login -u system:admin</code></pre></div></div></li><li><p>Validate the Users and Identities.</p><div class="listingblock"><div class="content"><pre class="highlight"><code class="sh language-sh hljs bash">oc get users</code></pre></div></div>
<div class="listingblock"><div class="title">Sample Output</div><div class="content"><pre class="highlight nowrap"><code class="texinfo language-texinfo hljs nginx"><span class="hljs-title">NAME</span>     UID                                    FULL NAME        IDENTITIES
andrew   bd053f76-3db3-11e9-93dc-0a580a80001a   andrew OSEUser   ldapidp:uid=andrew,cn=users,cn=accounts,dc=shared,dc=example,dc=opentlc,dc=com</code></pre></div></div>
<div class="listingblock"><div class="content"><pre class="highlight"><code class="sh language-sh hljs bash">oc get identities</code></pre></div></div>
<div class="listingblock"><div class="title">Sample Output</div><div class="content"><pre class="highlight nowrap"><code class="texinfo language-texinfo hljs nginx"><span class="hljs-title">NAME</span>                                                                             IDP NAME   IDP USER NAME                                                            USER NAME   USER UID
ldapidp:uid=andrew,cn=users,cn=accounts,dc=shared,dc=example,dc=opentlc,dc=com   ldapidp    uid=andrew,cn=users,cn=accounts,dc=shared,dc=example,dc=opentlc,dc=com   andrew      bd053f76-3db3-11e9-93dc-0a580a80001a</code></pre></div></div></li></ol></div></div></div>
<div class="sect1"><h2 id="_remove_kubeadmin_user">7. Remove kubeadmin User</h2><div class="sectionbody"><div class="paragraph"><p>It is a good idea to back up the <code>auth</code> directory in your cluster install directory. This directory contains the <code>kubeconfig</code> file with the certificate for the <code>system:admin</code> user.</p></div>
<div class="paragraph"><p>OpenShift created a temporary admin user, <code>kubeadmin</code>, with a builtin authentication provider, during the installation.</p></div>
<div class="paragraph"><p>When logging into OpenShift through the Web Console the login screen asks for which authentication provider it should use. Once you install an additional authentication provider like LDAP you now have two authentication providers: LDAP and the default <code>kubeadmin</code> login. Once your authentication is set up properly the kubeadmin user is no longer necessary. You can delete this user by running the following command as <code>system:admin</code>:</p></div>
<div class="listingblock"><div class="content"><pre class="highlight"><code class="sh language-sh hljs bash">oc delete secret kubeadmin -n kube-system</code></pre></div></div>
<div class="paragraph"><p>You may also want to give one of your users <code>cluster-admin</code> permissions to fall back on:</p></div>
<div class="listingblock"><div class="content"><pre class="highlight"><code class="sh language-sh hljs bash">oc adm policy add-cluster-role-to-user cluster-admin karla</code></pre></div></div></div></div></div><div id="footer"><div id="footer-text"><br>Build Version: 3af7325eec47b35dd9d60df5246e7b3ac0924020   :   Last updated 2019-03-20 12:18:10 EDT</div></div></body></html>